<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Macro Analytics</title>
  <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root {
      --sidebar-w: 220px;
      --bg:      #0d1117;
      --surface: #161b22;
      --surface2:#1c2128;
      --border:  #21262d;
      --text:    #c9d1d9;
      --muted:   #8b949e;
      --gold:    #FFD700;
      --green:   #00E676;
      --blue:    #40C4FF;
      --red:     #FF5252;
      --orange:  #FF9800;
    }
    html { scroll-behavior: smooth; }
    body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; min-height: 100vh; }

    /* â”€â”€ Layout â”€â”€ */
    .layout { display: flex; min-height: 100vh; }

    /* â”€â”€ Sidebar â”€â”€ */
    .sidebar {
      width: var(--sidebar-w);
      min-height: 100vh;
      background: var(--surface);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      position: fixed;
      top: 0; left: 0; bottom: 0;
      overflow-y: auto;
      z-index: 200;
      transition: transform .25s ease;
    }
    .sidebar.collapsed { transform: translateX(calc(-1 * var(--sidebar-w))); }

    .sidebar-header {
      padding: 1rem 0.9rem 0.8rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .sidebar-logo { font-size: 1.3rem; }
    .sidebar-brand { font-size: 0.88rem; font-weight: 700; color: #e6edf3; flex: 1; }

    .nav-section {
      padding: 1rem 0.6rem 0.4rem;
      font-size: 0.68rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .08em;
      color: var(--muted);
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      width: 100%;
      padding: 0.55rem 0.9rem;
      margin: 0.1rem 0.4rem;
      width: calc(100% - 0.8rem);
      border: none;
      border-radius: 8px;
      background: transparent;
      color: var(--muted);
      font-size: 0.83rem;
      cursor: pointer;
      text-align: left;
      transition: all .15s;
    }
    .nav-item:hover  { background: var(--surface2); color: var(--text); }
    .nav-item.active { background: #001a2e; color: var(--blue); font-weight: 600; }
    .nav-icon { font-size: 1rem; flex-shrink: 0; }

    .sidebar-footer {
      margin-top: auto;
      padding: 0.8rem;
      border-top: 1px solid var(--border);
      font-size: 0.72rem;
      color: var(--muted);
      text-align: center;
    }

    /* â”€â”€ Main â”€â”€ */
    .main {
      margin-left: var(--sidebar-w);
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: margin-left .25s ease;
    }
    .main.full { margin-left: 0; }

    /* â”€â”€ Top Header â”€â”€ */
    .top-header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.6rem;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left { display: flex; align-items: center; gap: 0.8rem; }

    .sidebar-toggle-btn {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--muted);
      border-radius: 6px;
      padding: 0.3rem 0.5rem;
      cursor: pointer;
      font-size: 1rem;
      line-height: 1;
      transition: all .15s;
    }
    .sidebar-toggle-btn:hover { border-color: var(--blue); color: var(--blue); }

    .header-title h1 { font-size: 1rem; font-weight: 700; color: #e6edf3; }
    .header-title p  { font-size: 0.75rem; color: var(--muted); }

    .header-right { display: flex; align-items: center; gap: 0.8rem; }

    /* â”€â”€ Language switcher â”€â”€ */
    .lang-switcher {
      display: flex;
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    .lang-btn {
      padding: 0.28rem 0.55rem;
      border: none;
      border-right: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-size: 0.75rem;
      cursor: pointer;
      transition: all .15s;
      white-space: nowrap;
    }
    .lang-btn:last-child { border-right: none; }
    .lang-btn:hover      { background: var(--surface2); color: var(--text); }
    .lang-btn.active     { background: #001a2e; color: var(--blue); font-weight: 700; }

    /* â”€â”€ Range bar â”€â”€ */
    .range-bar {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 0.55rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    .range-label { font-size: 0.78rem; color: var(--muted); }

    .btn-group { display: flex; gap: 0.25rem; }
    .rng-btn {
      padding: 0.25rem 0.6rem;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-size: 0.76rem;
      cursor: pointer;
      transition: all .15s;
    }
    .rng-btn:hover  { border-color: var(--blue); color: var(--blue); }
    .rng-btn.active { border-color: var(--blue); background: #001a2e; color: var(--blue); font-weight: 700; }

    .date-inputs { display: flex; align-items: center; gap: 0.35rem; }
    .date-inputs input[type="date"] {
      background: var(--bg); border: 1px solid var(--border);
      color: var(--text); border-radius: 6px;
      padding: 0.25rem 0.45rem; font-size: 0.76rem;
    }
    .date-inputs span { color: var(--muted); font-size: 0.78rem; }
    .apply-btn {
      padding: 0.25rem 0.7rem; border-radius: 6px;
      border: 1px solid var(--blue); background: #001a2e;
      color: var(--blue); font-size: 0.76rem; cursor: pointer; font-weight: 600;
    }
    .apply-btn:hover { background: #003060; }

    /* â”€â”€ Stats â”€â”€ */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.8rem;
      padding: 1rem 1.5rem;
    }
    .stat-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 0.8rem 1rem;
    }
    .stat-card .label { font-size: 0.69rem; color: var(--muted); text-transform: uppercase; letter-spacing: .05em; }
    .stat-card .value { font-size: 1.15rem; font-weight: 700; color: #e6edf3; margin-top: 0.25rem; }
    .stat-card .sub   { font-size: 0.72rem; color: var(--muted); margin-top: 0.12rem; }

    /* â”€â”€ Charts â”€â”€ */
    .charts { padding: 0 1.5rem 1.5rem; }
    .chart-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.4rem;
      margin-bottom: 1rem;
      overflow: hidden;
    }
    .chart-title {
      font-size: 0.8rem; font-weight: 600;
      color: var(--muted); padding: 0.5rem 0.7rem 0;
      letter-spacing: .03em;
    }

    /* â”€â”€ Footer â”€â”€ */
    footer {
      margin-top: auto;
      border-top: 1px solid var(--border);
      padding: 0.8rem 1.5rem;
      font-size: 0.76rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.4rem;
    }
    footer a { color: var(--blue); text-decoration: none; }
    footer a:hover { text-decoration: underline; }

    /* â”€â”€ Loading / overlay â”€â”€ */
    #loading {
      position: fixed;
      top: 0; right: 0; bottom: 0;
      left: var(--sidebar-w);          /* ì‚¬ì´ë“œë°” ì˜¤ë¥¸ìª½ë¶€í„° ë®ìŒ */
      background: var(--bg);
      display: flex; align-items: center; justify-content: center;
      flex-direction: column; gap: 1rem; color: var(--muted);
      z-index: 9999;
    }
    @media (max-width: 768px) {
      #loading { left: 0; }             /* ëª¨ë°”ì¼: ì „ì²´ ë®ìŒ */
    }
    #view-loader { display: none; }     /* JSë¡œ flex ì „í™˜ */
    .spinner {
      width: 32px; height: 32px;
      border: 3px solid var(--border);
      border-top-color: var(--blue);
      border-radius: 50%;
      animation: spin .7s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* â”€â”€ Mobile â”€â”€ */
    @media (max-width: 768px) {
      .sidebar { transform: translateX(calc(-1 * var(--sidebar-w))); }
      .sidebar.open { transform: translateX(0); box-shadow: 4px 0 20px #0006; }
      .main { margin-left: 0; }
      .stats-row { grid-template-columns: repeat(2, 1fr); }
      .range-bar { padding: 0.55rem 1rem; }
      .charts { padding: 0 1rem 1rem; }
    }

    /* Sidebar overlay on mobile */
    .sidebar-overlay {
      display: none;
      position: fixed; inset: 0;
      background: #0008;
      z-index: 199;
    }
    .sidebar-overlay.show { display: block; }

    /* â”€â”€ Quiz â”€â”€ */
    .quiz-wrap {
      max-width: 700px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }
    .quiz-card-dark {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2rem;
      position: relative;
    }
    .quiz-category-badge, .quiz-difficulty-badge {
      display: inline-block;
      font-size: 0.68rem;
      font-weight: 600;
      padding: 0.2rem 0.55rem;
      border-radius: 20px;
      margin-bottom: 0.3rem;
      margin-right: 0.4rem;
      text-transform: uppercase;
      letter-spacing: .05em;
    }
    .quiz-category-badge { background: #001a2e; color: var(--blue); border: 1px solid var(--blue); }
    .quiz-difficulty-badge.easy   { background: #0d2d1a; color: var(--green); border: 1px solid var(--green); }
    .quiz-difficulty-badge.medium { background: #2d2200; color: var(--gold);  border: 1px solid var(--gold);  }
    .quiz-difficulty-badge.hard   { background: #2d0d0d; color: var(--red);   border: 1px solid var(--red);   }
    .quiz-question {
      font-size: 1.25rem;
      font-weight: 600;
      color: #e6edf3;
      line-height: 1.65;
      margin: 1.2rem 0 1.8rem;
      min-height: 70px;
    }
    .quiz-answers {
      display: flex;
      gap: 1rem;
    }
    .quiz-ans-btn {
      flex: 1;
      border: none;
      border-radius: 12px;
      padding: 1.2rem 1rem;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.4rem;
      font-weight: 700;
      transition: transform .2s, box-shadow .2s, opacity .2s;
    }
    .quiz-ans-btn:hover:not(:disabled) { transform: translateY(-3px); }
    .quiz-ans-btn:disabled { cursor: default; }
    .quiz-o {
      background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
      color: #fff;
      box-shadow: 0 6px 18px rgba(0,184,148,.35);
    }
    .quiz-x {
      background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
      color: #fff;
      box-shadow: 0 6px 18px rgba(108,92,231,.35);
    }
    .quiz-ans-symbol { font-size: 2.5rem; line-height: 1; }
    .quiz-ans-label  { font-size: 0.85rem; opacity: .9; }
    .quiz-result {
      margin-top: 1.5rem;
    }
    .quiz-result-msg {
      font-size: 1.35rem;
      font-weight: 700;
      text-align: center;
      padding: 0.8rem 1rem;
      border-radius: 10px;
      margin-bottom: 1rem;
    }
    .quiz-result-msg.correct   { color: var(--green); background: #0d2d1a; }
    .quiz-result-msg.incorrect { color: var(--red);   background: #2d0d0d; }
    .quiz-explanation {
      font-size: 0.9rem;
      color: var(--muted);
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 10px;
      padding: 1rem 1.2rem;
      line-height: 1.7;
      margin-bottom: 1.2rem;
    }
    .quiz-next-btn {
      display: block;
      width: 100%;
      padding: 0.8rem;
      border: none;
      border-radius: 10px;
      background: linear-gradient(135deg, #40C4FF 0%, #0090d4 100%);
      color: #0d1117;
      font-size: 1rem;
      font-weight: 700;
      cursor: pointer;
      transition: transform .15s, box-shadow .15s;
    }
    .quiz-next-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(64,196,255,.3); }
    .quiz-stats-bar {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      display: flex;
      align-items: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }
    .quiz-stat { display: flex; flex-direction: column; align-items: center; gap: 0.15rem; flex: 1; min-width: 60px; }
    .quiz-stat-label { font-size: 0.68rem; text-transform: uppercase; letter-spacing: .05em; color: var(--muted); }
    .quiz-stat-val   { font-size: 1.4rem; font-weight: 700; color: #e6edf3; }
    .quiz-reset-btn {
      margin-left: auto;
      padding: 0.4rem 0.9rem;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--muted);
      font-size: 0.78rem;
      cursor: pointer;
      transition: all .15s;
    }
    .quiz-reset-btn:hover { border-color: var(--red); color: var(--red); }
    .quiz-filter-bar {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.75rem 1.2rem;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      flex-wrap: wrap;
    }
    .quiz-filter-label { font-size: 0.78rem; color: var(--muted); }
    .quiz-filter-bar select {
      background: var(--bg);
      border: 1px solid var(--border);
      color: var(--text);
      border-radius: 8px;
      padding: 0.3rem 0.6rem;
      font-size: 0.8rem;
      cursor: pointer;
    }
    @media (max-width: 768px) {
      .quiz-answers { flex-direction: column; }
      .quiz-question { font-size: 1.05rem; }
    }
  </style>
</head>
<body>

<div id="loading"><div class="spinner"></div><span id="loading-text">ë¡œë”© ì¤‘â€¦</span></div>
<div class="sidebar-overlay" id="overlay"></div>

<div class="layout">

  <!-- â”€â”€ Sidebar â”€â”€ -->
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <span class="sidebar-logo">ğŸ“Š</span>
      <span class="sidebar-brand" data-i18n="sidebarTitle">ë§¤í¬ë¡œ ë¶„ì„</span>
    </div>

    <div class="nav-section" data-i18n="navSection">ì‹œì¥ ì§€í‘œ</div>

    <button class="nav-item active" data-view="tga">
      <span class="nav-icon">ğŸ¦</span>
      <span data-i18n="navTga">TGA vs S&amp;P 500</span>
    </button>
    <button class="nav-item" data-view="fed">
      <span class="nav-icon">ğŸ“ˆ</span>
      <span data-i18n="navFed">ê¸°ì¤€ê¸ˆë¦¬ vs S&amp;P 500</span>
    </button>
    <button class="nav-item" data-view="us_debt">
      <span class="nav-icon">ğŸ›ï¸</span>
      <span data-i18n="navUsDebt">ì´ ë¶€ì±„ vs S&amp;P 500</span>
    </button>

    <button class="nav-item" data-view="vix">
  <span class="nav-icon">ğŸ˜¨</span>
  <span data-i18n="navVix">VIX ê³µí¬ì§€ìˆ˜</span>
</button>

    <button class="nav-item" data-view="yield10">
  <span class="nav-icon">ğŸ“‰</span>
  <span data-i18n="navYield10">10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬</span>
</button>

    <button class="nav-item" data-view="dxy">
  <span class="nav-icon">ğŸ’µ</span>
  <span data-i18n="navDxy">ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY)</span>
</button>

    <button class="nav-item" data-view="m2">
  <span class="nav-icon">ğŸ’°</span>
  <span data-i18n="navM2">M2 í†µí™”ëŸ‰</span>
</button>

    <button class="nav-item" data-view="cpi">
  <span class="nav-icon">ğŸ”¥</span>
  <span data-i18n="navCpi">CPI ì¸í”Œë ˆì´ì…˜</span>
</button>

    <button class="nav-item" data-view="copper">
  <span class="nav-icon">ğŸ”§</span>
  <span data-i18n="navCopper">êµ¬ë¦¬ (Dr. Copper)</span>
</button>

    <button class="nav-item" data-view="gold_dxy">
  <span class="nav-icon">ğŸ…</span>
  <span data-i18n="navGoldDxy">ê¸ˆ vs ë‹¬ëŸ¬ì¸ë±ìŠ¤</span>
</button>

    <button class="nav-item" data-view="btc_qqq">
  <span class="nav-icon">â‚¿</span>
  <span data-i18n="navBtcQqq">ë¹„íŠ¸ì½”ì¸ vs ë‚˜ìŠ¤ë‹¥</span>
</button>

    <button class="nav-item" data-view="wti_cpi">
  <span class="nav-icon">ğŸ›¢ï¸</span>
  <span data-i18n="navWtiCpi">WTI ì›ìœ  vs CPI</span>
</button>

    <button class="nav-item" data-view="unrate_fed">
  <span class="nav-icon">ğŸ“Š</span>
  <span data-i18n="navUnrateFed">ì‹¤ì—…ë¥  vs ê¸°ì¤€ê¸ˆë¦¬</span>
</button>

    <!-- ##CHART_NAV_ITEMS## add_chart.pyê°€ ì—¬ê¸° ìœ„ì— nav-itemì„ ì‚½ì… -->

    <div class="nav-section" data-i18n="navSectionQuiz">ê²½ì œ í€´ì¦ˆ</div>

    <button class="nav-item" data-view="quiz">
      <span class="nav-icon">ğŸ¯</span>
      <span data-i18n="navQuiz">O/X í€´ì¦ˆ</span>
    </button>

    <div class="sidebar-footer">
      <span data-i18n="sidebarFooter">ë§¤ ì˜ì—…ì¼ ìë™ ì—…ë°ì´íŠ¸</span>
    </div>
  </nav>

  <!-- â”€â”€ Main â”€â”€ -->
  <div class="main" id="main">

    <!-- Top Header -->
    <header class="top-header">
      <div class="header-left">
        <button class="sidebar-toggle-btn" id="sidebar-toggle" title="Toggle sidebar">â˜°</button>
        <div class="header-title">
          <h1 id="view-title">â€”</h1>
          <p id="view-sub">â€”</p>
        </div>
      </div>
      <div class="header-right">
        <!-- Language switcher -->
        <div class="lang-switcher">
          <button class="lang-btn active" data-lang="ko">í•œêµ­ì–´</button>
          <button class="lang-btn" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="zh">ä¸­æ–‡</button>
          <button class="lang-btn" data-lang="ja">æ—¥æœ¬èª</button>
        </div>
      </div>
    </header>

    <!-- Range bar -->
    <div class="range-bar">
      <span class="range-label" data-i18n="rangeLabel">ê¸°ê°„ ì„ íƒ</span>
      <div class="btn-group" id="range-btns">
        <button class="rng-btn" data-months="3">3M</button>
        <button class="rng-btn" data-months="6">6M</button>
        <button class="rng-btn" data-months="12">1Y</button>
        <button class="rng-btn" data-months="24">2Y</button>
        <button class="rng-btn active" data-months="0" data-i18n-inner="rangeAll">ì „ì²´</button>
      </div>
      <div class="date-inputs">
        <input type="date" id="date-from" />
        <span>~</span>
        <input type="date" id="date-to" />
        <button class="apply-btn" id="apply-range" data-i18n="rangeApply">ì ìš©</button>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-row">
      <div class="stat-card">
        <div class="label" id="stat-x-label" data-i18n="statX">â€”</div>
        <div class="value" id="stat-x">â€”</div>
        <div class="sub" id="stat-x-sub">â€”</div>
      </div>
      <div class="stat-card">
        <div class="label" id="stat-y-label">S&amp;P 500</div>
        <div class="value" id="stat-y">â€”</div>
        <div class="sub" id="stat-y-sub">ìµœì‹  ì¢…ê°€</div>
      </div>
      <div class="stat-card">
        <div class="label" data-i18n="statCorr">ì „ì²´ Pearson r</div>
        <div class="value" id="stat-corr">â€”</div>
        <div class="sub" id="stat-pval">â€”</div>
      </div>
      <div class="stat-card">
        <div class="label" data-i18n="statRangeCorr">ì„ íƒ êµ¬ê°„ r</div>
        <div class="value" id="stat-range-corr">â€”</div>
        <div class="sub" data-i18n="statRangeCorrSub">í˜„ì¬ ì„ íƒ êµ¬ê°„</div>
      </div>
      <div class="stat-card">
        <div class="label" data-i18n="statUpdated">ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸</div>
        <div class="value" id="stat-updated">â€”</div>
        <div class="sub" data-i18n="statUpdatedSub">ìë™ ê°±ì‹ </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="charts" style="position:relative;">
      <!-- ë·° ì „í™˜ ì¤‘ ì°¨íŠ¸ ì˜ì—­ë§Œ ë®ëŠ” ë¡œë”© ì˜¤ë²„ë ˆì´ -->
      <div id="view-loader" style="
        display:none; position:absolute; inset:0; z-index:100;
        background:rgba(13,17,23,0.75); backdrop-filter:blur(2px);
        align-items:center; justify-content:center; flex-direction:column; gap:0.8rem;
        color:var(--muted); font-size:0.85rem;">
        <div class="spinner"></div>
        <span id="view-loader-text">ë¡œë”© ì¤‘â€¦</span>
      </div>

      <div class="chart-card">
        <div class="chart-title" id="title-main">â€”</div>
        <div id="chart-main"></div>
      </div>
      <div class="chart-card">
        <div class="chart-title" id="title-corr" data-i18n="chartCorr">ë¡¤ë§ ìƒê´€ê³„ìˆ˜ (Pearson r)</div>
        <div id="chart-corr"></div>
      </div>
      <div class="chart-card">
        <div class="chart-title" id="title-scatter">â€”</div>
        <div id="chart-scatter"></div>
      </div>
    </div>

    <!-- â”€â”€ í€´ì¦ˆ ë·° â”€â”€ -->
    <div id="quiz-view" style="display:none; flex:1; padding:1.5rem; overflow-y:auto;">
      <div class="quiz-wrap">
        <div class="quiz-card-dark" id="quizCard">
          <div class="quiz-category-badge" id="quizCategory"></div>
          <div class="quiz-difficulty-badge" id="quizDifficulty"></div>
          <div class="quiz-question" id="quizQuestion" data-i18n-placeholder="quizLoading">í€´ì¦ˆë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
          <div class="quiz-answers">
            <button class="quiz-ans-btn quiz-o" id="quizTrueBtn" onclick="quizSelectAnswer(true)">
              <span class="quiz-ans-symbol">O</span>
              <span class="quiz-ans-label" data-i18n="quizAnswerTrue">ë§ìŠµë‹ˆë‹¤</span>
            </button>
            <button class="quiz-ans-btn quiz-x" id="quizFalseBtn" onclick="quizSelectAnswer(false)">
              <span class="quiz-ans-symbol">X</span>
              <span class="quiz-ans-label" data-i18n="quizAnswerFalse">í‹€ë ¸ìŠµë‹ˆë‹¤</span>
            </button>
          </div>
          <div class="quiz-result" id="quizResult" style="display:none;">
            <div class="quiz-result-msg" id="quizResultMsg"></div>
            <div class="quiz-explanation" id="quizExplanation"></div>
            <button class="quiz-next-btn" onclick="quizLoadNext()" data-i18n="quizNext">ë‹¤ìŒ ë¬¸ì œ â†’</button>
          </div>
        </div>

        <div class="quiz-stats-bar">
          <div class="quiz-stat">
            <span class="quiz-stat-label" data-i18n="quizCorrect">ì •ë‹µ</span>
            <span class="quiz-stat-val" id="quizCorrectCount">0</span>
          </div>
          <div class="quiz-stat">
            <span class="quiz-stat-label" data-i18n="quizIncorrect">ì˜¤ë‹µ</span>
            <span class="quiz-stat-val" id="quizIncorrectCount">0</span>
          </div>
          <div class="quiz-stat">
            <span class="quiz-stat-label" data-i18n="quizAccuracy">ì •ë‹µë¥ </span>
            <span class="quiz-stat-val" id="quizAccuracy">0%</span>
          </div>
          <button class="quiz-reset-btn" onclick="quizResetStats()" data-i18n="quizReset">í†µê³„ ì´ˆê¸°í™”</button>
        </div>

        <div class="quiz-filter-bar">
          <span class="quiz-filter-label" data-i18n="quizFilter">í•„í„°</span>
          <select id="quizCategoryFilter" onchange="quizApplyFilter()">
            <option value="" data-i18n="quizFilterAll">ì „ì²´ ì¹´í…Œê³ ë¦¬</option>
          </select>
          <select id="quizDifficultyFilter" onchange="quizApplyFilter()">
            <option value="" data-i18n="quizFilterAllDiff">ì „ì²´ ë‚œì´ë„</option>
            <option value="easy" data-i18n="quizEasy">ì‰¬ì›€</option>
            <option value="medium" data-i18n="quizMedium">ë³´í†µ</option>
            <option value="hard" data-i18n="quizHard">ì–´ë ¤ì›€</option>
          </select>
        </div>
      </div>
    </div>

    <footer>
      <span>
        <span data-i18n="footerData">ë°ì´í„°</span>:
        <a href="https://fiscaldata.treasury.gov" target="_blank">US Treasury</a> &amp;
        <a href="https://fred.stlouisfed.org" target="_blank">FRED</a> &amp;
        <a href="https://finance.yahoo.com" target="_blank">Yahoo Finance</a>
      </span>
      <span>
        <span data-i18n="footerSource">ì†ŒìŠ¤ ì½”ë“œ</span>:
        <a href="https://github.com/SangbumChoi/finance" target="_blank">SangbumChoi/finance</a>
      </span>
    </footer>

  </div><!-- /.main -->
</div><!-- /.layout -->

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// i18n
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const T = {
  ko: {
    sidebarTitle:'ë§¤í¬ë¡œ ë¶„ì„', navSection:'ì‹œì¥ ì§€í‘œ',
    navTga:'TGA vs S&P 500', navFed:'ê¸°ì¤€ê¸ˆë¦¬ vs S&P 500',
    navUsDebt:'ì´ ë¶€ì±„ vs S&P 500',
    viewTitleUsDebt:'ë¯¸êµ­ ì´ ë¶€ì±„ ê·œëª¨ vs S&P 500',
    viewSubUsDebt:'ë¶„ê¸°ë³„ ì—…ë°ì´íŠ¸ Â· FRED (GFDEBTN)',
    statUsDebt:'í˜„ì¬ ì´ ë¶€ì±„', statUsDebtSub:'ì¡° ë‹¬ëŸ¬ (T$)',
    chartMainUsDebt:'S&P 500 & ë¯¸êµ­ ì´ ë¶€ì±„ â€” ì‹œê³„ì—´',
    chartScatterUsDebt:'ë¯¸êµ­ ì´ ë¶€ì±„ vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    usDebtLabel:'ì´ ë¶€ì±„ (T$)',
    navSectionQuiz:'ê²½ì œ í€´ì¦ˆ', navQuiz:'O/X í€´ì¦ˆ',
    quizLoading:'í€´ì¦ˆë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...',
    quizAnswerTrue:'ë§ìŠµë‹ˆë‹¤', quizAnswerFalse:'í‹€ë ¸ìŠµë‹ˆë‹¤',
    quizNext:'ë‹¤ìŒ ë¬¸ì œ â†’',
    quizCorrect:'ì •ë‹µ', quizIncorrect:'ì˜¤ë‹µ', quizAccuracy:'ì •ë‹µë¥ ',
    quizReset:'í†µê³„ ì´ˆê¸°í™”',
    quizFilter:'í•„í„°', quizFilterAll:'ì „ì²´ ì¹´í…Œê³ ë¦¬', quizFilterAllDiff:'ì „ì²´ ë‚œì´ë„',
    quizEasy:'ì‰¬ì›€', quizMedium:'ë³´í†µ', quizHard:'ì–´ë ¤ì›€',
    quizResultCorrect:'ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰', quizResultIncorrect:'í‹€ë ¸ìŠµë‹ˆë‹¤! ğŸ˜…',
    quizExplanationPrefix:'ì„¤ëª…: ', quizNoExplanation:'ì„¤ëª… ì—†ìŒ',
    viewTitleQuiz:'ê²½ì œ O/X í€´ì¦ˆ', viewSubQuiz:'ê²½ì œ ì§€ì‹ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”',
    sidebarFooter:'ë§¤ ì˜ì—…ì¼ ìë™ ì—…ë°ì´íŠ¸',
    viewTitleTga:'ë¯¸êµ­ ì¬ë¬´ë¶€ TGA ì”ê³  vs S&P 500',
    viewSubTga:'ë§¤ ì˜ì—…ì¼ ìë™ ì—…ë°ì´íŠ¸ Â· US Treasury Fiscal Data',
    viewTitleFed:'ë¯¸êµ­ ê¸°ì¤€ê¸ˆë¦¬(FEDFUNDS) vs S&P 500',
    viewSubFed:'ë§¤ì›” ì—…ë°ì´íŠ¸ Â· FRED (Federal Reserve Economic Data)',
    statX:'TGA í˜„ì¬ ì”ê³ ', statXSub:'ì‹­ì–µ ë‹¬ëŸ¬ (B$)',
    statXFed:'í˜„ì¬ ê¸°ì¤€ê¸ˆë¦¬', statXSubFed:'%',
    statSp500:'S&P 500', statSp500Sub:'ìµœì‹  ì¢…ê°€',
    statCorr:'ì „ì²´ Pearson r', statRangeCorr:'ì„ íƒ êµ¬ê°„ r',
    statRangeCorrSub:'í˜„ì¬ ì„ íƒ êµ¬ê°„', statUpdated:'ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸', statUpdatedSub:'ìë™ ê°±ì‹ ',
    rangeLabel:'ê¸°ê°„ ì„ íƒ', rangeApply:'ì ìš©', rangeAll:'ì „ì²´',
    chartMainTga:'S&P 500 & TGA ì”ê³  â€” ì‹œê³„ì—´',
    chartMainFed:'S&P 500 & ê¸°ì¤€ê¸ˆë¦¬ â€” ì‹œê³„ì—´',
    chartCorr:'ë¡¤ë§ ìƒê´€ê³„ìˆ˜ (Pearson r)',
    chartScatterTga:'TGA ì”ê³  vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    chartScatterFed:'ê¸°ì¤€ê¸ˆë¦¬ vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    footerData:'ë°ì´í„°', footerSource:'ì†ŒìŠ¤ ì½”ë“œ',
    loadingText:'ë°ì´í„° ë¡œë”© ì¤‘â€¦',
    trendline:'ì¶”ì„¸ì„ ', overallR:'ì „ì²´ r', rollingR:'ë¡¤ë§ r',
    sp500Label:'S&P 500', tgaLabel:'TGA ì”ê³  (B$)', fedLabel:'ê¸°ì¤€ê¸ˆë¦¬ (%)',
    navVix:'VIX vs S&P 500', viewTitleVix:'VIX ê³µí¬ì§€ìˆ˜ vs S&P 500', viewSubVix:'ìë™ ì—…ë°ì´íŠ¸',
    statVix:'VIX ê³µí¬ì§€ìˆ˜', statVixSub:'',
    chartMainVix:'VIX ê³µí¬ì§€ìˆ˜ vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterVix:'VIX ê³µí¬ì§€ìˆ˜ vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    vixLabel:'VIX ê³µí¬ì§€ìˆ˜',
    navYield10:'10ë…„ë¬¼ ê¸ˆë¦¬ vs S&P 500', viewTitleYield10:'10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬ vs S&P 500', viewSubYield10:'ìë™ ì—…ë°ì´íŠ¸',
    statYield10:'10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬', statYield10Sub:'%',
    chartMainYield10:'10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬ vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterYield10:'10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬ vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    yield10Label:'10ë…„ë¬¼ êµ­ì±„ê¸ˆë¦¬ (%)',
    navDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ vs S&P 500', viewTitleDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY) vs S&P 500', viewSubDxy:'ìë™ ì—…ë°ì´íŠ¸',
    statDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY)', statDxySub:'',
    chartMainDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY) vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY) vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    dxyLabel:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY)',
    navM2:'M2 í†µí™”ëŸ‰ vs S&P 500', viewTitleM2:'M2 í†µí™”ëŸ‰ YoY vs S&P 500', viewSubM2:'ìë™ ì—…ë°ì´íŠ¸',
    statM2:'M2 í†µí™”ëŸ‰ YoY', statM2Sub:'%',
    chartMainM2:'M2 í†µí™”ëŸ‰ YoY vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterM2:'M2 í†µí™”ëŸ‰ YoY vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    m2Label:'M2 í†µí™”ëŸ‰ YoY ì¦ê°€ìœ¨ (%)',
    navCpi:'CPI vs S&P 500', viewTitleCpi:'CPI ì¸í”Œë ˆì´ì…˜ vs S&P 500', viewSubCpi:'ìë™ ì—…ë°ì´íŠ¸',
    statCpi:'CPI ì¸í”Œë ˆì´ì…˜', statCpiSub:'%',
    chartMainCpi:'CPI ì¸í”Œë ˆì´ì…˜ vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterCpi:'CPI ì¸í”Œë ˆì´ì…˜ vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    cpiLabel:'CPI ì¸í”Œë ˆì´ì…˜ (%)',
    navCopper:'êµ¬ë¦¬ vs S&P 500', viewTitleCopper:'êµ¬ë¦¬ (Dr. Copper) vs S&P 500', viewSubCopper:'ìë™ ì—…ë°ì´íŠ¸',
    statCopper:'êµ¬ë¦¬ (Dr. Copper)', statCopperSub:'',
    chartMainCopper:'êµ¬ë¦¬ (Dr. Copper) vs S&P 500 â€” ì‹œê³„ì—´',
    chartScatterCopper:'êµ¬ë¦¬ (Dr. Copper) vs S&P 500 â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    copperLabel:'êµ¬ë¦¬ (Dr. Copper)',
    navGoldDxy:'ê¸ˆ vs ë‹¬ëŸ¬ì¸ë±ìŠ¤', viewTitleGoldDxy:'ê¸ˆ(Gold) vs ë‹¬ëŸ¬ì¸ë±ìŠ¤(DXY)', viewSubGoldDxy:'ìë™ ì—…ë°ì´íŠ¸',
    statGoldDxy:'ê¸ˆ (Gold)', statGoldDxySub:'USD/oz',
    chartMainGoldDxy:'ê¸ˆ(Gold) & ë‹¬ëŸ¬ì¸ë±ìŠ¤(DXY) â€” ì‹œê³„ì—´',
    chartScatterGoldDxy:'ë‹¬ëŸ¬ì¸ë±ìŠ¤(DXY) vs ê¸ˆ(Gold) â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    goldLabel:'ê¸ˆ (Gold, USD/oz)', dxyGoldLabel:'ë‹¬ëŸ¬ì¸ë±ìŠ¤ (DXY)',
    navBtcQqq:'ë¹„íŠ¸ì½”ì¸ vs ë‚˜ìŠ¤ë‹¥', viewTitleBtcQqq:'ë¹„íŠ¸ì½”ì¸(BTC) vs ë‚˜ìŠ¤ë‹¥(QQQ)', viewSubBtcQqq:'ìë™ ì—…ë°ì´íŠ¸',
    statBtcQqq:'ë¹„íŠ¸ì½”ì¸ (BTC)', statBtcQqqSub:'USD',
    chartMainBtcQqq:'ë¹„íŠ¸ì½”ì¸(BTC) & ë‚˜ìŠ¤ë‹¥(QQQ) â€” ì‹œê³„ì—´',
    chartScatterBtcQqq:'ë‚˜ìŠ¤ë‹¥(QQQ) vs ë¹„íŠ¸ì½”ì¸(BTC) â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    btcLabel:'ë¹„íŠ¸ì½”ì¸ (USD)', qqqLabel:'NASDAQ (QQQ, USD)',
    navWtiCpi:'WTI ì›ìœ  vs CPI', viewTitleWtiCpi:'WTI ì›ìœ  vs CPI ì¸í”Œë ˆì´ì…˜', viewSubWtiCpi:'ìë™ ì—…ë°ì´íŠ¸',
    statWtiCpi:'WTI ì›ìœ ', statWtiCpiSub:'USD/bbl',
    chartMainWtiCpi:'WTI ì›ìœ  & CPI ì¸í”Œë ˆì´ì…˜ â€” ì‹œê³„ì—´',
    chartScatterWtiCpi:'CPI ì¸í”Œë ˆì´ì…˜ vs WTI ì›ìœ  â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    wtiLabel:'WTI ì›ìœ  (USD/bbl)', cpiWtiLabel:'CPI ì¸í”Œë ˆì´ì…˜ìœ¨ (%)',
    navUnrateFed:'ì‹¤ì—…ë¥  vs ê¸°ì¤€ê¸ˆë¦¬', viewTitleUnrateFed:'ë¯¸êµ­ ì‹¤ì—…ë¥  vs ê¸°ì¤€ê¸ˆë¦¬', viewSubUnrateFed:'ìë™ ì—…ë°ì´íŠ¸',
    statUnrateFed:'ì‹¤ì—…ë¥  (UNRATE)', statUnrateFedSub:'%',
    chartMainUnrateFed:'ë¯¸êµ­ ì‹¤ì—…ë¥  & ê¸°ì¤€ê¸ˆë¦¬ â€” ì‹œê³„ì—´',
    chartScatterUnrateFed:'ê¸°ì¤€ê¸ˆë¦¬ vs ì‹¤ì—…ë¥  â€” ì‚°ì ë„ (ì„ íƒ êµ¬ê°„)',
    unrateLabel:'ì‹¤ì—…ë¥  (%)', fedUnrateLabel:'ê¸°ì¤€ê¸ˆë¦¬ (%)',
    // ##CHART_TRANS_KO##
  },
  en: {
    sidebarTitle:'Macro Analytics', navSection:'Market Indicators',
    navTga:'TGA vs S&P 500', navFed:'Fed Rate vs S&P 500',
    navUsDebt:'Total Debt vs S&P 500',
    viewTitleUsDebt:'US Total Federal Debt vs S&P 500',
    viewSubUsDebt:'Quarterly update Â· FRED (GFDEBTN)',
    statUsDebt:'Total Federal Debt', statUsDebtSub:'Trillion USD (T$)',
    chartMainUsDebt:'S&P 500 & US Total Debt â€” Time Series',
    chartScatterUsDebt:'US Total Debt vs S&P 500 â€” Scatter (selected range)',
    usDebtLabel:'Total Debt (T$)',
    navSectionQuiz:'Economy Quiz', navQuiz:'O/X Quiz',
    quizLoading:'Loading quiz...', quizAnswerTrue:'True', quizAnswerFalse:'False',
    quizNext:'Next Question â†’', quizCorrect:'Correct', quizIncorrect:'Wrong', quizAccuracy:'Accuracy',
    quizReset:'Reset Stats', quizFilter:'Filter', quizFilterAll:'All Categories', quizFilterAllDiff:'All Levels',
    quizEasy:'Easy', quizMedium:'Medium', quizHard:'Hard',
    quizResultCorrect:'Correct! ğŸ‰', quizResultIncorrect:'Wrong! ğŸ˜…',
    quizExplanationPrefix:'Explanation: ', quizNoExplanation:'No explanation',
    viewTitleQuiz:'Economy O/X Quiz', viewSubQuiz:'Test your economics knowledge',
    sidebarFooter:'Auto-updated every business day',
    viewTitleTga:'US Treasury TGA Balance vs S&P 500',
    viewSubTga:'Auto-updated every business day Â· US Treasury Fiscal Data',
    viewTitleFed:'US Fed Funds Rate (FEDFUNDS) vs S&P 500',
    viewSubFed:'Monthly update Â· FRED (Federal Reserve Economic Data)',
    statX:'TGA Balance', statXSub:'Billion USD (B$)',
    statXFed:'Fed Funds Rate', statXSubFed:'%',
    statSp500:'S&P 500', statSp500Sub:'Latest close',
    statCorr:'Overall Pearson r', statRangeCorr:'Range Pearson r',
    statRangeCorrSub:'Current selection', statUpdated:'Last Updated', statUpdatedSub:'Auto-updated',
    rangeLabel:'Time Range', rangeApply:'Apply', rangeAll:'All',
    chartMainTga:'S&P 500 & TGA Balance â€” Time Series',
    chartMainFed:'S&P 500 & Fed Rate â€” Time Series',
    chartCorr:'Rolling Correlation (Pearson r)',
    chartScatterTga:'TGA Balance vs S&P 500 â€” Scatter (selected range)',
    chartScatterFed:'Fed Rate vs S&P 500 â€” Scatter (selected range)',
    footerData:'Data', footerSource:'Source Code',
    loadingText:'Loading dataâ€¦',
    trendline:'Trendline', overallR:'Overall r', rollingR:'Rolling r',
    sp500Label:'S&P 500', tgaLabel:'TGA Balance (B$)', fedLabel:'Fed Rate (%)',
    navVix:'VIX vs S&P 500', viewTitleVix:'VIX Fear Index vs S&P 500', viewSubVix:'Auto-updated',
    statVix:'VIX Fear Index', statVixSub:'',
    chartMainVix:'VIX Fear Index vs S&P 500 â€” Time Series',
    chartScatterVix:'VIX Fear Index vs S&P 500 â€” Scatter (selected range)',
    vixLabel:'VIX Fear Index',
    navYield10:'10Y Yield vs S&P 500', viewTitleYield10:'10Y Treasury Yield vs S&P 500', viewSubYield10:'Auto-updated',
    statYield10:'10Y Treasury Yield', statYield10Sub:'%',
    chartMainYield10:'10Y Treasury Yield vs S&P 500 â€” Time Series',
    chartScatterYield10:'10Y Treasury Yield vs S&P 500 â€” Scatter (selected range)',
    yield10Label:'10Y Treasury Yield (%)',
    navDxy:'DXY vs S&P 500', viewTitleDxy:'Dollar Index (DXY) vs S&P 500', viewSubDxy:'Auto-updated',
    statDxy:'Dollar Index (DXY)', statDxySub:'',
    chartMainDxy:'Dollar Index (DXY) vs S&P 500 â€” Time Series',
    chartScatterDxy:'Dollar Index (DXY) vs S&P 500 â€” Scatter (selected range)',
    dxyLabel:'Dollar Index (DXY)',
    navM2:'M2 YoY vs S&P 500', viewTitleM2:'M2 YoY Growth vs S&P 500', viewSubM2:'Auto-updated',
    statM2:'M2 YoY Growth', statM2Sub:'%',
    chartMainM2:'M2 YoY Growth vs S&P 500 â€” Time Series',
    chartScatterM2:'M2 YoY Growth vs S&P 500 â€” Scatter (selected range)',
    m2Label:'M2 YoY Growth (%)',
    navCpi:'CPI vs S&P 500', viewTitleCpi:'CPI Inflation vs S&P 500', viewSubCpi:'Auto-updated',
    statCpi:'CPI Inflation', statCpiSub:'%',
    chartMainCpi:'CPI Inflation vs S&P 500 â€” Time Series',
    chartScatterCpi:'CPI Inflation vs S&P 500 â€” Scatter (selected range)',
    cpiLabel:'CPI Inflation (%)',
    navCopper:'Copper vs S&P 500', viewTitleCopper:'Copper (Dr. Copper) vs S&P 500', viewSubCopper:'Auto-updated',
    statCopper:'Copper (Dr. Copper)', statCopperSub:'',
    chartMainCopper:'Copper (Dr. Copper) vs S&P 500 â€” Time Series',
    chartScatterCopper:'Copper (Dr. Copper) vs S&P 500 â€” Scatter (selected range)',
    copperLabel:'Copper (Dr. Copper)',
    navGoldDxy:'Gold vs Dollar Index', viewTitleGoldDxy:'Gold vs Dollar Index (DXY)', viewSubGoldDxy:'Auto-updated',
    statGoldDxy:'Gold', statGoldDxySub:'USD/oz',
    chartMainGoldDxy:'Gold & Dollar Index (DXY) â€” Time Series',
    chartScatterGoldDxy:'Dollar Index (DXY) vs Gold â€” Scatter (selected range)',
    goldLabel:'Gold (USD/oz)', dxyGoldLabel:'Dollar Index (DXY)',
    navBtcQqq:'Bitcoin vs NASDAQ', viewTitleBtcQqq:'Bitcoin (BTC) vs NASDAQ (QQQ)', viewSubBtcQqq:'Auto-updated',
    statBtcQqq:'Bitcoin (BTC)', statBtcQqqSub:'USD',
    chartMainBtcQqq:'Bitcoin (BTC) & NASDAQ (QQQ) â€” Time Series',
    chartScatterBtcQqq:'NASDAQ (QQQ) vs Bitcoin (BTC) â€” Scatter (selected range)',
    btcLabel:'Bitcoin (USD)', qqqLabel:'NASDAQ (QQQ, USD)',
    navWtiCpi:'WTI Crude vs CPI', viewTitleWtiCpi:'WTI Crude Oil vs CPI Inflation', viewSubWtiCpi:'Auto-updated',
    statWtiCpi:'WTI Crude', statWtiCpiSub:'USD/bbl',
    chartMainWtiCpi:'WTI Crude Oil & CPI Inflation â€” Time Series',
    chartScatterWtiCpi:'CPI Inflation vs WTI Crude â€” Scatter (selected range)',
    wtiLabel:'WTI Crude (USD/bbl)', cpiWtiLabel:'CPI Inflation (%)',
    navUnrateFed:'Unemployment vs Fed Rate', viewTitleUnrateFed:'US Unemployment vs Fed Rate', viewSubUnrateFed:'Auto-updated',
    statUnrateFed:'Unemployment Rate', statUnrateFedSub:'%',
    chartMainUnrateFed:'US Unemployment Rate & Fed Rate â€” Time Series',
    chartScatterUnrateFed:'Fed Rate vs Unemployment â€” Scatter (selected range)',
    unrateLabel:'Unemployment Rate (%)', fedUnrateLabel:'Fed Funds Rate (%)',
    // ##CHART_TRANS_EN##
  },
  zh: {
    sidebarTitle:'å®è§‚åˆ†æ', navSection:'å¸‚åœºæŒ‡æ ‡',
    navTga:'TGA vs æ ‡æ™®500', navFed:'è”é‚¦åŸºå‡†åˆ©ç‡ vs æ ‡æ™®500',
    navUsDebt:'æ€»å€ºåŠ¡ vs æ ‡æ™®500',
    viewTitleUsDebt:'ç¾å›½è”é‚¦æ€»å€ºåŠ¡ vs æ ‡æ™®500',
    viewSubUsDebt:'æŒ‰å­£åº¦æ›´æ–° Â· FRED (GFDEBTN)',
    statUsDebt:'å½“å‰æ€»å€ºåŠ¡', statUsDebtSub:'ä¸‡äº¿ç¾å…ƒ (T$)',
    chartMainUsDebt:'æ ‡æ™®500 & ç¾å›½æ€»å€ºåŠ¡ â€” æ—¶é—´åºåˆ—',
    chartScatterUsDebt:'ç¾å›½æ€»å€ºåŠ¡ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    usDebtLabel:'æ€»å€ºåŠ¡ (T$)',
    navSectionQuiz:'ç»æµæµ‹éªŒ', navQuiz:'O/X æµ‹éªŒ',
    quizLoading:'åŠ è½½ä¸­...', quizAnswerTrue:'æ­£ç¡®', quizAnswerFalse:'é”™è¯¯',
    quizNext:'ä¸‹ä¸€é¢˜ â†’', quizCorrect:'ç­”å¯¹', quizIncorrect:'ç­”é”™', quizAccuracy:'æ­£ç¡®ç‡',
    quizReset:'é‡ç½®ç»Ÿè®¡', quizFilter:'ç­›é€‰', quizFilterAll:'å…¨éƒ¨åˆ†ç±»', quizFilterAllDiff:'å…¨éƒ¨éš¾åº¦',
    quizEasy:'ç®€å•', quizMedium:'ä¸­ç­‰', quizHard:'å›°éš¾',
    quizResultCorrect:'å›ç­”æ­£ç¡®ï¼ğŸ‰', quizResultIncorrect:'å›ç­”é”™è¯¯ï¼ğŸ˜…',
    quizExplanationPrefix:'è§£é‡Šï¼š', quizNoExplanation:'æš‚æ— è§£é‡Š',
    viewTitleQuiz:'ç»æµ O/X æµ‹éªŒ', viewSubQuiz:'æµ‹è¯•æ‚¨çš„ç»æµå­¦çŸ¥è¯†',
    sidebarFooter:'æ¯ä¸ªäº¤æ˜“æ—¥è‡ªåŠ¨æ›´æ–°',
    viewTitleTga:'ç¾å›½è´¢æ”¿éƒ¨TGAä½™é¢ vs æ ‡æ™®500',
    viewSubTga:'æ¯ä¸ªäº¤æ˜“æ—¥è‡ªåŠ¨æ›´æ–° Â· ç¾å›½è´¢æ”¿æ•°æ®',
    viewTitleFed:'ç¾å›½è”é‚¦åŸºå‡†åˆ©ç‡(FEDFUNDS) vs æ ‡æ™®500',
    viewSubFed:'æ¯æœˆæ›´æ–° Â· FRED(ç¾è”å‚¨ç»æµæ•°æ®)',
    statX:'TGAä½™é¢', statXSub:'åäº¿ç¾å…ƒ (B$)',
    statXFed:'å½“å‰åŸºå‡†åˆ©ç‡', statXSubFed:'%',
    statSp500:'æ ‡æ™®500', statSp500Sub:'æœ€æ–°æ”¶ç›˜ä»·',
    statCorr:'æ€»ä½“Pearson r', statRangeCorr:'åŒºé—´Pearson r',
    statRangeCorrSub:'å½“å‰é€‰æ‹©åŒºé—´', statUpdated:'æœ€åæ›´æ–°', statUpdatedSub:'è‡ªåŠ¨æ›´æ–°',
    rangeLabel:'æ—¶é—´èŒƒå›´', rangeApply:'åº”ç”¨', rangeAll:'å…¨éƒ¨',
    chartMainTga:'æ ‡æ™®500 & TGAä½™é¢ â€” æ—¶é—´åºåˆ—',
    chartMainFed:'æ ‡æ™®500 & åŸºå‡†åˆ©ç‡ â€” æ—¶é—´åºåˆ—',
    chartCorr:'æ»šåŠ¨ç›¸å…³ç³»æ•° (Pearson r)',
    chartScatterTga:'TGAä½™é¢ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    chartScatterFed:'åŸºå‡†åˆ©ç‡ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    footerData:'æ•°æ®æ¥æº', footerSource:'æºä»£ç ',
    loadingText:'æ•°æ®åŠ è½½ä¸­â€¦',
    trendline:'è¶‹åŠ¿çº¿', overallR:'æ€»ä½“r', rollingR:'æ»šåŠ¨r',
    sp500Label:'æ ‡æ™®500', tgaLabel:'TGAä½™é¢ (B$)', fedLabel:'åŸºå‡†åˆ©ç‡ (%)',
    navVix:'VIX vs æ ‡æ™®500', viewTitleVix:'VIXææ…ŒæŒ‡æ•° vs æ ‡æ™®500', viewSubVix:'è‡ªåŠ¨æ›´æ–°',
    statVix:'VIXææ…ŒæŒ‡æ•°', statVixSub:'',
    chartMainVix:'VIXææ…ŒæŒ‡æ•° vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterVix:'VIXææ…ŒæŒ‡æ•° vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    vixLabel:'VIXææ…ŒæŒ‡æ•°',
    navYield10:'10å¹´åˆ©ç‡ vs æ ‡æ™®500', viewTitleYield10:'10å¹´æœŸå›½å€ºæ”¶ç›Šç‡ vs æ ‡æ™®500', viewSubYield10:'è‡ªåŠ¨æ›´æ–°',
    statYield10:'10å¹´æœŸå›½å€ºæ”¶ç›Šç‡', statYield10Sub:'%',
    chartMainYield10:'10å¹´æœŸå›½å€ºæ”¶ç›Šç‡ vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterYield10:'10å¹´æœŸå›½å€ºæ”¶ç›Šç‡ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    yield10Label:'10å¹´æœŸå›½å€ºæ”¶ç›Šç‡ (%)',
    navDxy:'ç¾å…ƒæŒ‡æ•° vs æ ‡æ™®500', viewTitleDxy:'ç¾å…ƒæŒ‡æ•°(DXY) vs æ ‡æ™®500', viewSubDxy:'è‡ªåŠ¨æ›´æ–°',
    statDxy:'ç¾å…ƒæŒ‡æ•°(DXY)', statDxySub:'',
    chartMainDxy:'ç¾å…ƒæŒ‡æ•°(DXY) vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterDxy:'ç¾å…ƒæŒ‡æ•°(DXY) vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    dxyLabel:'ç¾å…ƒæŒ‡æ•°(DXY)',
    navM2:'M2åŒæ¯” vs æ ‡æ™®500', viewTitleM2:'M2åŒæ¯”å¢é€Ÿ vs æ ‡æ™®500', viewSubM2:'è‡ªåŠ¨æ›´æ–°',
    statM2:'M2åŒæ¯”å¢é€Ÿ', statM2Sub:'%',
    chartMainM2:'M2åŒæ¯”å¢é€Ÿ vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterM2:'M2åŒæ¯”å¢é€Ÿ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    m2Label:'M2åŒæ¯”å¢é€Ÿ (%)',
    navCpi:'CPI vs æ ‡æ™®500', viewTitleCpi:'CPIé€šè´§è†¨èƒ€ç‡ vs æ ‡æ™®500', viewSubCpi:'è‡ªåŠ¨æ›´æ–°',
    statCpi:'CPIé€šè´§è†¨èƒ€ç‡', statCpiSub:'%',
    chartMainCpi:'CPIé€šè´§è†¨èƒ€ç‡ vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterCpi:'CPIé€šè´§è†¨èƒ€ç‡ vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    cpiLabel:'CPIé€šè´§è†¨èƒ€ç‡ (%)',
    navCopper:'é“œ vs æ ‡æ™®500', viewTitleCopper:'é“œ(é“œåšå£«) vs æ ‡æ™®500', viewSubCopper:'è‡ªåŠ¨æ›´æ–°',
    statCopper:'é“œ(é“œåšå£«)', statCopperSub:'',
    chartMainCopper:'é“œ(é“œåšå£«) vs æ ‡æ™®500 â€” æ—¶é—´åºåˆ—',
    chartScatterCopper:'é“œ(é“œåšå£«) vs æ ‡æ™®500 â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    copperLabel:'é“œ(é“œåšå£«)',
    navGoldDxy:'é»„é‡‘vsç¾å…ƒæŒ‡æ•°', viewTitleGoldDxy:'é»„é‡‘ vs ç¾å…ƒæŒ‡æ•°(DXY)', viewSubGoldDxy:'è‡ªåŠ¨æ›´æ–°',
    statGoldDxy:'é»„é‡‘', statGoldDxySub:'USD/oz',
    chartMainGoldDxy:'é»„é‡‘ & ç¾å…ƒæŒ‡æ•°(DXY) â€” æ—¶é—´åºåˆ—',
    chartScatterGoldDxy:'ç¾å…ƒæŒ‡æ•°(DXY) vs é»„é‡‘ â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    goldLabel:'é»„é‡‘ (USD/oz)', dxyGoldLabel:'ç¾å…ƒæŒ‡æ•°(DXY)',
    navBtcQqq:'æ¯”ç‰¹å¸vsçº³æ–¯è¾¾å…‹', viewTitleBtcQqq:'æ¯”ç‰¹å¸(BTC) vs çº³æ–¯è¾¾å…‹(QQQ)', viewSubBtcQqq:'è‡ªåŠ¨æ›´æ–°',
    statBtcQqq:'æ¯”ç‰¹å¸(BTC)', statBtcQqqSub:'USD',
    chartMainBtcQqq:'æ¯”ç‰¹å¸(BTC) & çº³æ–¯è¾¾å…‹(QQQ) â€” æ—¶é—´åºåˆ—',
    chartScatterBtcQqq:'çº³æ–¯è¾¾å…‹(QQQ) vs æ¯”ç‰¹å¸(BTC) â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    btcLabel:'æ¯”ç‰¹å¸ (USD)', qqqLabel:'çº³æ–¯è¾¾å…‹ (QQQ, USD)',
    navWtiCpi:'WTIåŸæ²¹vs CPI', viewTitleWtiCpi:'WTIåŸæ²¹ vs CPIé€šè´§è†¨èƒ€ç‡', viewSubWtiCpi:'è‡ªåŠ¨æ›´æ–°',
    statWtiCpi:'WTIåŸæ²¹', statWtiCpiSub:'USD/bbl',
    chartMainWtiCpi:'WTIåŸæ²¹ & CPIé€šè´§è†¨èƒ€ç‡ â€” æ—¶é—´åºåˆ—',
    chartScatterWtiCpi:'CPIé€šè´§è†¨èƒ€ç‡ vs WTIåŸæ²¹ â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    wtiLabel:'WTIåŸæ²¹ (USD/bbl)', cpiWtiLabel:'CPIé€šè´§è†¨èƒ€ç‡ (%)',
    navUnrateFed:'å¤±ä¸šç‡vsåŸºå‡†åˆ©ç‡', viewTitleUnrateFed:'ç¾å›½å¤±ä¸šç‡ vs åŸºå‡†åˆ©ç‡', viewSubUnrateFed:'è‡ªåŠ¨æ›´æ–°',
    statUnrateFed:'å¤±ä¸šç‡ (UNRATE)', statUnrateFedSub:'%',
    chartMainUnrateFed:'ç¾å›½å¤±ä¸šç‡ & åŸºå‡†åˆ©ç‡ â€” æ—¶é—´åºåˆ—',
    chartScatterUnrateFed:'åŸºå‡†åˆ©ç‡ vs å¤±ä¸šç‡ â€” æ•£ç‚¹å›¾ (é€‰å®šåŒºé—´)',
    unrateLabel:'å¤±ä¸šç‡ (%)', fedUnrateLabel:'åŸºå‡†åˆ©ç‡ (%)',
    // ##CHART_TRANS_ZH##
  },
  ja: {
    sidebarTitle:'ãƒã‚¯ãƒ­åˆ†æ', navSection:'å¸‚å ´æŒ‡æ¨™',
    navTga:'TGA vs S&P500', navFed:'æ”¿ç­–é‡‘åˆ© vs S&P500',
    navUsDebt:'ç·å‚µå‹™ vs S&P500',
    viewTitleUsDebt:'ç±³å›½é€£é‚¦ç·å‚µå‹™ vs S&P500',
    viewSubUsDebt:'å››åŠæœŸæ›´æ–° Â· FRED (GFDEBTN)',
    statUsDebt:'ç¾åœ¨ã®ç·å‚µå‹™', statUsDebtSub:'å…†ãƒ‰ãƒ« (T$)',
    chartMainUsDebt:'S&P500 & ç±³å›½ç·å‚µå‹™ â€” æ™‚ç³»åˆ—',
    chartScatterUsDebt:'ç±³å›½ç·å‚µå‹™ vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    usDebtLabel:'ç·å‚µå‹™ (T$)',
    navSectionQuiz:'çµŒæ¸ˆã‚¯ã‚¤ã‚º', navQuiz:'O/X ã‚¯ã‚¤ã‚º',
    quizLoading:'èª­ã¿è¾¼ã¿ä¸­...', quizAnswerTrue:'æ­£ã—ã„', quizAnswerFalse:'èª¤ã‚Š',
    quizNext:'æ¬¡ã®å•é¡Œ â†’', quizCorrect:'æ­£è§£', quizIncorrect:'ä¸æ­£è§£', quizAccuracy:'æ­£ç­”ç‡',
    quizReset:'çµ±è¨ˆãƒªã‚»ãƒƒãƒˆ', quizFilter:'ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼', quizFilterAll:'å…¨ã‚«ãƒ†ã‚´ãƒª', quizFilterAllDiff:'å…¨é›£æ˜“åº¦',
    quizEasy:'ã‚„ã•ã—ã„', quizMedium:'æ™®é€š', quizHard:'é›£ã—ã„',
    quizResultCorrect:'æ­£è§£ã§ã™ï¼ğŸ‰', quizResultIncorrect:'ä¸æ­£è§£ï¼ğŸ˜…',
    quizExplanationPrefix:'è§£èª¬ï¼š', quizNoExplanation:'è§£èª¬ãªã—',
    viewTitleQuiz:'çµŒæ¸ˆ O/X ã‚¯ã‚¤ã‚º', viewSubQuiz:'çµŒæ¸ˆçŸ¥è­˜ã‚’ãƒ†ã‚¹ãƒˆã—ã‚ˆã†',
    sidebarFooter:'æ¯å–¶æ¥­æ—¥è‡ªå‹•æ›´æ–°',
    viewTitleTga:'ç±³è²¡å‹™çœTGAæ®‹é«˜ vs S&P500',
    viewSubTga:'æ¯å–¶æ¥­æ—¥è‡ªå‹•æ›´æ–° Â· ç±³è²¡å‹™çœè²¡æ”¿ãƒ‡ãƒ¼ã‚¿',
    viewTitleFed:'ç±³å›½æ”¿ç­–é‡‘åˆ©(FEDFUNDS) vs S&P500',
    viewSubFed:'æ¯æœˆæ›´æ–° Â· FREDï¼ˆé€£é‚¦æº–å‚™åˆ¶åº¦çµŒæ¸ˆãƒ‡ãƒ¼ã‚¿ï¼‰',
    statX:'TGAæ®‹é«˜', statXSub:'åå„„ãƒ‰ãƒ« (B$)',
    statXFed:'ç¾åœ¨ã®æ”¿ç­–é‡‘åˆ©', statXSubFed:'%',
    statSp500:'S&P500', statSp500Sub:'æœ€æ–°çµ‚å€¤',
    statCorr:'å…¨ä½“Pearson r', statRangeCorr:'æœŸé–“Pearson r',
    statRangeCorrSub:'ç¾åœ¨ã®é¸æŠæœŸé–“', statUpdated:'æœ€çµ‚æ›´æ–°', statUpdatedSub:'è‡ªå‹•æ›´æ–°',
    rangeLabel:'æœŸé–“é¸æŠ', rangeApply:'é©ç”¨', rangeAll:'å…¨æœŸé–“',
    chartMainTga:'S&P500 & TGAæ®‹é«˜ â€” æ™‚ç³»åˆ—',
    chartMainFed:'S&P500 & æ”¿ç­–é‡‘åˆ© â€” æ™‚ç³»åˆ—',
    chartCorr:'ãƒ­ãƒ¼ãƒªãƒ³ã‚°ç›¸é–¢ä¿‚æ•° (Pearson r)',
    chartScatterTga:'TGAæ®‹é«˜ vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    chartScatterFed:'æ”¿ç­–é‡‘åˆ© vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    footerData:'ãƒ‡ãƒ¼ã‚¿', footerSource:'ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰',
    loadingText:'ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¸­â€¦',
    trendline:'ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³', overallR:'å…¨ä½“r', rollingR:'ãƒ­ãƒ¼ãƒªãƒ³ã‚°r',
    sp500Label:'S&P500', tgaLabel:'TGAæ®‹é«˜ (B$)', fedLabel:'æ”¿ç­–é‡‘åˆ© (%)',
    navVix:'VIX vs S&P500', viewTitleVix:'VIXææ€–æŒ‡æ•° vs S&P500', viewSubVix:'è‡ªå‹•æ›´æ–°',
    statVix:'VIXææ€–æŒ‡æ•°', statVixSub:'',
    chartMainVix:'VIXææ€–æŒ‡æ•° vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterVix:'VIXææ€–æŒ‡æ•° vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    vixLabel:'VIXææ€–æŒ‡æ•°',
    navYield10:'10å¹´åˆ©å›ã‚Š vs S&P500', viewTitleYield10:'10å¹´å›½å‚µåˆ©å›ã‚Š vs S&P500', viewSubYield10:'è‡ªå‹•æ›´æ–°',
    statYield10:'10å¹´å›½å‚µåˆ©å›ã‚Š', statYield10Sub:'%',
    chartMainYield10:'10å¹´å›½å‚µåˆ©å›ã‚Š vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterYield10:'10å¹´å›½å‚µåˆ©å›ã‚Š vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    yield10Label:'10å¹´å›½å‚µåˆ©å›ã‚Š (%)',
    navDxy:'DXY vs S&P500', viewTitleDxy:'ãƒ‰ãƒ«æŒ‡æ•°(DXY) vs S&P500', viewSubDxy:'è‡ªå‹•æ›´æ–°',
    statDxy:'ãƒ‰ãƒ«æŒ‡æ•°(DXY)', statDxySub:'',
    chartMainDxy:'ãƒ‰ãƒ«æŒ‡æ•°(DXY) vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterDxy:'ãƒ‰ãƒ«æŒ‡æ•°(DXY) vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    dxyLabel:'ãƒ‰ãƒ«æŒ‡æ•°(DXY)',
    navM2:'M2å‰å¹´æ¯” vs S&P500', viewTitleM2:'M2å‰å¹´æ¯”å¢—åŠ ç‡ vs S&P500', viewSubM2:'è‡ªå‹•æ›´æ–°',
    statM2:'M2å‰å¹´æ¯”å¢—åŠ ç‡', statM2Sub:'%',
    chartMainM2:'M2å‰å¹´æ¯”å¢—åŠ ç‡ vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterM2:'M2å‰å¹´æ¯”å¢—åŠ ç‡ vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    m2Label:'M2å‰å¹´æ¯”å¢—åŠ ç‡ (%)',
    navCpi:'CPI vs S&P500', viewTitleCpi:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ vs S&P500', viewSubCpi:'è‡ªå‹•æ›´æ–°',
    statCpi:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡', statCpiSub:'%',
    chartMainCpi:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterCpi:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    cpiLabel:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ (%)',
    navCopper:'éŠ… vs S&P500', viewTitleCopper:'éŠ…(ãƒ‰ã‚¯ã‚¿ãƒ¼ã‚³ãƒƒãƒ‘ãƒ¼) vs S&P500', viewSubCopper:'è‡ªå‹•æ›´æ–°',
    statCopper:'éŠ…(ãƒ‰ã‚¯ã‚¿ãƒ¼ã‚³ãƒƒãƒ‘ãƒ¼)', statCopperSub:'',
    chartMainCopper:'éŠ…(ãƒ‰ã‚¯ã‚¿ãƒ¼ã‚³ãƒƒãƒ‘ãƒ¼) vs S&P500 â€” æ™‚ç³»åˆ—',
    chartScatterCopper:'éŠ…(ãƒ‰ã‚¯ã‚¿ãƒ¼ã‚³ãƒƒãƒ‘ãƒ¼) vs S&P500 â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    copperLabel:'éŠ…(ãƒ‰ã‚¯ã‚¿ãƒ¼ã‚³ãƒƒãƒ‘ãƒ¼)',
    navGoldDxy:'é‡‘vsãƒ‰ãƒ«æŒ‡æ•°', viewTitleGoldDxy:'é‡‘(Gold) vs ãƒ‰ãƒ«æŒ‡æ•°(DXY)', viewSubGoldDxy:'è‡ªå‹•æ›´æ–°',
    statGoldDxy:'é‡‘ (Gold)', statGoldDxySub:'USD/oz',
    chartMainGoldDxy:'é‡‘(Gold) & ãƒ‰ãƒ«æŒ‡æ•°(DXY) â€” æ™‚ç³»åˆ—',
    chartScatterGoldDxy:'ãƒ‰ãƒ«æŒ‡æ•°(DXY) vs é‡‘(Gold) â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    goldLabel:'é‡‘ (USD/oz)', dxyGoldLabel:'ãƒ‰ãƒ«æŒ‡æ•°(DXY)',
    navBtcQqq:'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³vsãƒŠã‚¹ãƒ€ãƒƒã‚¯', viewTitleBtcQqq:'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³(BTC) vs ãƒŠã‚¹ãƒ€ãƒƒã‚¯(QQQ)', viewSubBtcQqq:'è‡ªå‹•æ›´æ–°',
    statBtcQqq:'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³(BTC)', statBtcQqqSub:'USD',
    chartMainBtcQqq:'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³(BTC) & ãƒŠã‚¹ãƒ€ãƒƒã‚¯(QQQ) â€” æ™‚ç³»åˆ—',
    chartScatterBtcQqq:'ãƒŠã‚¹ãƒ€ãƒƒã‚¯(QQQ) vs ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³(BTC) â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    btcLabel:'ãƒ“ãƒƒãƒˆã‚³ã‚¤ãƒ³ (USD)', qqqLabel:'ãƒŠã‚¹ãƒ€ãƒƒã‚¯ (QQQ, USD)',
    navWtiCpi:'WTIåŸæ²¹vs CPI', viewTitleWtiCpi:'WTIåŸæ²¹ vs CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡', viewSubWtiCpi:'è‡ªå‹•æ›´æ–°',
    statWtiCpi:'WTIåŸæ²¹', statWtiCpiSub:'USD/bbl',
    chartMainWtiCpi:'WTIåŸæ²¹ & CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ â€” æ™‚ç³»åˆ—',
    chartScatterWtiCpi:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ vs WTIåŸæ²¹ â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    wtiLabel:'WTIåŸæ²¹ (USD/bbl)', cpiWtiLabel:'CPIã‚¤ãƒ³ãƒ•ãƒ¬ç‡ (%)',
    navUnrateFed:'å¤±æ¥­ç‡vsæ”¿ç­–é‡‘åˆ©', viewTitleUnrateFed:'ç±³å›½å¤±æ¥­ç‡ vs æ”¿ç­–é‡‘åˆ©', viewSubUnrateFed:'è‡ªå‹•æ›´æ–°',
    statUnrateFed:'å¤±æ¥­ç‡ (UNRATE)', statUnrateFedSub:'%',
    chartMainUnrateFed:'ç±³å›½å¤±æ¥­ç‡ & æ”¿ç­–é‡‘åˆ© â€” æ™‚ç³»åˆ—',
    chartScatterUnrateFed:'æ”¿ç­–é‡‘åˆ© vs å¤±æ¥­ç‡ â€” æ•£å¸ƒå›³ (é¸æŠæœŸé–“)',
    unrateLabel:'å¤±æ¥­ç‡ (%)', fedUnrateLabel:'æ”¿ç­–é‡‘åˆ© (%)',
    // ##CHART_TRANS_JA##
  },
};

let LANG = 'ko';

function t(key) { return T[LANG][key] ?? T['ko'][key] ?? key; }

function applyTranslations() {
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.dataset.i18n;
    el.textContent = t(key);
  });
  document.querySelectorAll('[data-i18n-inner]').forEach(el => {
    el.textContent = t(el.dataset.i18nInner);
  });
  document.getElementById('loading-text').textContent = t('loadingText');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Plotly ê³µí†µ ì„¤ì •
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const BG      = '#0d1117';
const SURFACE = '#161b22';
const GREEN   = '#00E676';
const BLUE    = '#40C4FF';
const GOLD    = '#FFD700';
const ORANGE  = '#FF9800';
const RED     = '#FF5252';
const GRAY    = '#90A4AE';

const baseLayout = {
  paper_bgcolor: SURFACE, plot_bgcolor: BG,
  font: { color: GRAY, family: '-apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif', size: 11 },
  margin: { l: 62, r: 62, t: 14, b: 38 },
  xaxis: { gridcolor:'#1e2933', linecolor:'#263238', tickcolor: GRAY, rangeslider:{visible:false} },
  yaxis: { gridcolor:'#1e2933', linecolor:'#263238', tickcolor: GRAY },
  legend: { bgcolor:'#1a1a2e88', bordercolor:'#21262d', borderwidth:1, font:{color:'#e6edf3'} },
  hovermode: 'x unified',
  hoverlabel: { bgcolor:'#1a1a2e', bordercolor:'#21262d', font:{color:'#e6edf3'} },
};
const cfg = { responsive:true, displayModeBar:true, displaylogo:false,
  modeBarButtonsToRemove:['lasso2d','select2d'] };

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë·° ì •ì˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const VIEWS = {
  tga: {
    file: 'data.json',
    xKey: 'tga',
    xColor: GOLD,
    yScale: 1,            // ë°ì´í„° ë³€í™˜ ì—†ìŒ
    fill: 'tozeroy',
    hoverTmpl: '$%{y:,.1f}B',
    scatterXFormat: v => `$${v?.toFixed(1)}B`,
    titleMain: () => t('chartMainTga'),
    titleScatter: () => t('chartScatterTga'),
    xAxisLabel: () => t('tgaLabel'),
    statLabel: () => t('statX'),
    statSub: () => t('statXSub'),
    statVal: (d) => `$${d?.toFixed(1)}B`,
  },
  fed: {
    file: 'fed_rate_data.json',
    xKey: 'fed_rate',
    xColor: ORANGE,
    yScale: -1,           // ìŒìˆ˜ ë³€í™˜ â†’ Plotlyì˜ autorangeê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ì „ ì¶•ì„ ë§Œë“¦
    fill: 'none',         // ìŒìˆ˜ ë³€í™˜ ì‹œ tozeroyê°€ ì „ ì˜ì—­ì„ ì±„ì›Œë²„ë ¤ ì œê±°
    hoverTmpl: '%{customdata:.2f}%', // customdataì— ì›ë³¸ ì–‘ìˆ˜ê°’ ì €ì¥
    scatterXFormat: v => `${v?.toFixed(2)}%`,
    titleMain: () => t('chartMainFed'),
    titleScatter: () => t('chartScatterFed'),
    xAxisLabel: () => t('fedLabel'),
    statLabel: () => t('statXFed'),
    statSub: () => t('statXSubFed'),
    statVal: (d) => `${d?.toFixed(2)}%`,
  },
  // ##CHART_VIEWS##
  gold_dxy: {
    file: 'gold_dxy_data.json',
    xKey: 'dxy',          // secondary axis (right, inverted)
    yKey: 'gold',         // primary axis (left)
    xColor: '#2196F3',
    yColor: '#FFD700',
    yScale: -1,
    fill: 'none',
    hoverTmpl: '%{customdata:.2f}',
    yHoverFmt: '%{y:,.0f}',
    yTickFmt: ',.0f',
    scatterXFormat: v => `${v?.toFixed(2)}`,
    titleMain:    () => t('chartMainGoldDxy'),
    titleScatter: () => t('chartScatterGoldDxy'),
    xAxisLabel:   () => t('dxyGoldLabel'),
    yLabel:       () => t('goldLabel'),
    statLabel:    () => t('statGoldDxy'),
    statSub:      () => t('statGoldDxySub'),
    yStatSub:     () => t('statGoldDxySub'),
    yStatVal:     d  => d != null ? `$${d.toLocaleString('ko-KR',{maximumFractionDigits:0})}` : 'â€”',
    statVal:      d  => `${d?.toFixed(2)}`,
  },
  btc_qqq: {
    file: 'btc_qqq_data.json',
    xKey: 'qqq',          // secondary axis (right)
    yKey: 'btc',          // primary axis (left)
    xColor: '#6C63FF',
    yColor: '#F7931A',
    yScale: 1,
    fill: 'none',
    hoverTmpl: '%{y:.2f}',
    yHoverFmt: '%{y:,.0f}',
    yTickFmt: ',.0f',
    scatterXFormat: v => `$${v?.toFixed(2)}`,
    titleMain:    () => t('chartMainBtcQqq'),
    titleScatter: () => t('chartScatterBtcQqq'),
    xAxisLabel:   () => t('qqqLabel'),
    yLabel:       () => t('btcLabel'),
    statLabel:    () => t('statBtcQqq'),
    statSub:      () => t('statBtcQqqSub'),
    yStatSub:     () => t('statBtcQqqSub'),
    yStatVal:     d  => d != null ? `$${d.toLocaleString('ko-KR',{maximumFractionDigits:0})}` : 'â€”',
    statVal:      d  => d != null ? `$${d.toFixed(2)}` : 'â€”',
  },
  wti_cpi: {
    file: 'wti_cpi_data.json',
    xKey: 'cpi',          // secondary axis (right)
    yKey: 'wti',          // primary axis (left)
    xColor: '#FF5722',
    yColor: '#8B4513',
    yScale: 1,
    fill: 'none',
    hoverTmpl: '%{y:.2f}%',
    yHoverFmt: '%{y:.2f}',
    yTickFmt: '.2f',
    scatterXFormat: v => `${v?.toFixed(2)}%`,
    titleMain:    () => t('chartMainWtiCpi'),
    titleScatter: () => t('chartScatterWtiCpi'),
    xAxisLabel:   () => t('cpiWtiLabel'),
    yLabel:       () => t('wtiLabel'),
    statLabel:    () => t('statWtiCpi'),
    statSub:      () => t('statWtiCpiSub'),
    yStatSub:     () => t('statWtiCpiSub'),
    yStatVal:     d  => d != null ? `$${d.toFixed(2)}` : 'â€”',
    statVal:      d  => `${d?.toFixed(2)}%`,
  },
  unrate_fed: {
    file: 'unrate_fed_data.json',
    xKey: 'fed_rate',     // secondary axis (right, inverted)
    yKey: 'unrate',       // primary axis (left)
    xColor: '#FF9800',
    yColor: '#00BCD4',
    yScale: -1,
    fill: 'none',
    hoverTmpl: '%{customdata:.2f}%',
    yHoverFmt: '%{y:.2f}%',
    yTickFmt: '.2f',
    scatterXFormat: v => `${v?.toFixed(2)}%`,
    titleMain:    () => t('chartMainUnrateFed'),
    titleScatter: () => t('chartScatterUnrateFed'),
    xAxisLabel:   () => t('fedUnrateLabel'),
    yLabel:       () => t('unrateLabel'),
    statLabel:    () => t('statUnrateFed'),
    statSub:      () => t('statUnrateFedSub'),
    yStatSub:     () => t('statUnrateFedSub'),
    yStatVal:     d  => d != null ? `${d.toFixed(1)}%` : 'â€”',
    statVal:      d  => `${d?.toFixed(2)}%`,
  },
  copper: {
      file: 'copper_data.json',
      xKey: 'copper',
      xColor: '#B87333',
      yScale: 1,
      fill: 'tozeroy',
      hoverTmpl: '%{y:.4g}',
      scatterXFormat: v => `${v?.toFixed(2)}`,
      titleMain:    () => t('chartMainCopper'),
      titleScatter: () => t('chartScatterCopper'),
      xAxisLabel:   () => t('copperLabel'),
      statLabel:    () => t('statCopper'),
      statSub:      () => t('statCopperSub'),
      statVal:      (d) => `${d?.toFixed(2)}`,
  },
  cpi: {
      file: 'cpi_data.json',
      xKey: 'cpi',
      xColor: '#FF5722',
      yScale: -1,
      fill: 'none',
      hoverTmpl: '%{customdata:.2f}%',
      scatterXFormat: v => `${v?.toFixed(2)}%`,
      titleMain:    () => t('chartMainCpi'),
      titleScatter: () => t('chartScatterCpi'),
      xAxisLabel:   () => t('cpiLabel'),
      statLabel:    () => t('statCpi'),
      statSub:      () => t('statCpiSub'),
      statVal:      (d) => `${d?.toFixed(2)}%`,
  },
  m2: {
      file: 'm2_data.json',
      xKey: 'm2',
      xColor: '#4CAF50',
      yScale: 1,
      fill: 'tozeroy',
      hoverTmpl: '%{y:.2f}%',
      scatterXFormat: v => `${v?.toFixed(2)}%`,
      titleMain:    () => t('chartMainM2'),
      titleScatter: () => t('chartScatterM2'),
      xAxisLabel:   () => t('m2Label'),
      statLabel:    () => t('statM2'),
      statSub:      () => t('statM2Sub'),
      statVal:      (d) => `${d?.toFixed(2)}B`,
  },
  dxy: {
      file: 'dxy_data.json',
      xKey: 'dxy',
      xColor: '#2196F3',
      yScale: -1,
      fill: 'none',
      hoverTmpl: '%{customdata:.4g}',
      scatterXFormat: v => `${v?.toFixed(2)}`,
      titleMain:    () => t('chartMainDxy'),
      titleScatter: () => t('chartScatterDxy'),
      xAxisLabel:   () => t('dxyLabel'),
      statLabel:    () => t('statDxy'),
      statSub:      () => t('statDxySub'),
      statVal:      (d) => `${d?.toFixed(2)}`,
  },
  yield10: {
      file: 'yield10_data.json',
      xKey: 'yield10',
      xColor: '#FF9800',
      yScale: -1,
      fill: 'none',
      hoverTmpl: '%{customdata:.2f}%',
      scatterXFormat: v => `${v?.toFixed(2)}%`,
      titleMain:    () => t('chartMainYield10'),
      titleScatter: () => t('chartScatterYield10'),
      xAxisLabel:   () => t('yield10Label'),
      statLabel:    () => t('statYield10'),
      statSub:      () => t('statYield10Sub'),
      statVal:      (d) => `${d?.toFixed(2)}%`,
  },
  vix: {
      file: 'vix_data.json',
      xKey: 'vix',
      xColor: '#E91E63',
      yScale: -1,
      fill: 'none',
      hoverTmpl: '%{customdata:.4g}',
      scatterXFormat: v => `${v?.toFixed(2)}`,
      titleMain:    () => t('chartMainVix'),
      titleScatter: () => t('chartScatterVix'),
      xAxisLabel:   () => t('vixLabel'),
      statLabel:    () => t('statVix'),
      statSub:      () => t('statVixSub'),
      statVal:      (d) => `${d?.toFixed(2)}`,
  },
  us_debt: {
    file: 'us_debt_data.json',
    xKey: 'us_debt',
    xColor: RED,
    yScale: 1,
    fill: 'tozeroy',
    hoverTmpl: '$%{y:.1f}T',
    xTickPrefix: '$', xTickSuffix: 'T', xTickFormat: '.1f',
    scatterXFormat: v => `$${v?.toFixed(1)}T`,
    titleMain: () => t('chartMainUsDebt'),
    titleScatter: () => t('chartScatterUsDebt'),
    xAxisLabel: () => t('usDebtLabel'),
    statLabel: () => t('statUsDebt'),
    statSub: () => t('statUsDebtSub'),
    statVal: (d) => `$${d?.toFixed(1)}T`,
  },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ìƒíƒœ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentView = 'tga';
let cache       = {};      // { tga: {...}, fed: {...} }
let rangeFrom   = null;
let rangeTo     = null;
let RAW         = null;    // í˜„ì¬ ë·° ë°ì´í„°

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// í—¬í¼
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function pearsonR(xs, ys) {
  const n = xs.length; if (n < 2) return NaN;
  const mx = xs.reduce((a,b)=>a+b,0)/n, my = ys.reduce((a,b)=>a+b,0)/n;
  let num=0,dx2=0,dy2=0;
  for(let i=0;i<n;i++){const dx=xs[i]-mx,dy=ys[i]-my;num+=dx*dy;dx2+=dx*dx;dy2+=dy*dy;}
  return num/Math.sqrt(dx2*dy2);
}

function sliceByRange() {
  const dates = RAW.dates;
  let i0=0, i1=dates.length-1;
  if(rangeFrom){ while(i0<dates.length && dates[i0]<rangeFrom) i0++; }
  if(rangeTo)  { while(i1>0 && dates[i1]>rangeTo) i1--; }
  return [i0, i1];
}

function getSlice() {
  const [i0,i1] = sliceByRange();
  const vDef    = VIEWS[currentView];
  const yKey    = vDef.yKey ?? 'sp500';
  return {
    dates:        RAW.dates.slice(i0,i1+1),
    x:            RAW[vDef.xKey].slice(i0,i1+1),
    y:            RAW[yKey].slice(i0,i1+1),
    rolling_corr: RAW.rolling_corr.slice(i0,i1+1),
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì°¨íŠ¸ 1 â€” ì´ì¤‘ ì¶• ì‹œê³„ì—´
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawMain(slice) {
  const vDef = VIEWS[currentView];
  const scale = vDef.yScale ?? 1;
  const isInverted = scale === -1;

  // yScale=-1(ê¸°ì¤€ê¸ˆë¦¬)ì´ë©´ ë°ì´í„°ë¥¼ ìŒìˆ˜ë¡œ ë³€í™˜ â†’ autorangeê°€ ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ì „ ì¶•ì„ ìƒì„±
  // Plotlyì˜ range[0]>range[1] ì •ê·œí™” ë¬¸ì œë¥¼ ìš°íšŒí•˜ëŠ” ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•
  const xPlotData = slice.x.map(v => (v == null ? null : v * scale));

  // ê¸°ì¤€ê¸ˆë¦¬ í˜¸ë²„: customdataì— ì›ë³¸ ì–‘ìˆ˜ ê°’ ì €ì¥
  const y2Trace = {
    x: slice.dates, y: xPlotData,
    name: vDef.xAxisLabel(), type:'scatter', mode:'lines',
    line:{color:vDef.xColor,width:1.5},
    fill: vDef.fill ?? 'tozeroy',
    fillcolor: vDef.xColor+'22',
    yaxis:'y2',
    hovertemplate:`<b>${vDef.xAxisLabel()}</b>: ${vDef.hoverTmpl}<extra></extra>`,
    ...(isInverted ? { customdata: slice.x } : {}),
  };

  const yLabel = vDef.yLabel ? vDef.yLabel() : t('sp500Label');
  const yColor = vDef.yColor ?? GREEN;
  const yHoverFmt = vDef.yHoverFmt ?? '%{y:,.0f}';
  const traces = [
    {
      x: slice.dates, y: slice.y,
      name: yLabel, type:'scatter', mode:'lines',
      line:{color:yColor,width:1.8}, yaxis:'y',
      hovertemplate:`<b>${yLabel}</b>: ${yHoverFmt}<extra></extra>`,
    },
    y2Trace,
  ];

  // ê¸°ì¤€ê¸ˆë¦¬ y2 ì¶•: ìŒìˆ˜ ë°ì´í„°ì— ë§ëŠ” ì»¤ìŠ¤í…€ í‹± ë ˆì´ë¸” (ìœ„: 0%, ì•„ë˜: 6%)
  let y2Extra = {};
  if (isInverted) {
    const xFinite = slice.x.filter(v => v != null && isFinite(v));
    const xMin = xFinite.reduce((a, b) => Math.min(a, b), Infinity);
    const xMax = xFinite.reduce((a, b) => Math.max(a, b), -Infinity);
    // ë²”ìœ„ì— ë”°ë¼ "nice number" í‹± ê°„ê²© ìë™ ê³„ì‚° (ì•½ 7ê°œ í‹± ëª©í‘œ)
    const range = xMax - xMin;
    const rawStep = range / 7;
    const exp = Math.pow(10, Math.floor(Math.log10(rawStep || 1)));
    const frac = rawStep / exp;
    let step = frac < 1.5 ? exp : frac < 3 ? 2 * exp : frac < 7 ? 5 * exp : 10 * exp;
    if (step < 0.1) step = 0.1;
    // ë‹¨ìœ„ ìë™ ê°ì§€: xAxisLabelì— (%) í¬í•¨ ì‹œë§Œ % ì ‘ë¯¸ì‚¬
    const xHasPct = vDef.xAxisLabel().includes('%');
    const tickSuffix = xHasPct ? '%' : '';
    const tickvals = [], ticktext = [];
    for (let v = 0; v <= Math.ceil(xMax / step) * step + step; v = Math.round((v + step) * 1e9) / 1e9) {
      tickvals.push(-v);
      ticktext.push(`${v.toFixed(step < 1 ? 1 : 0)}${tickSuffix}`);
    }
    y2Extra = { tickmode:'array', tickvals, ticktext };
  }

  const y2 = {
    gridcolor:'#1e2933', showgrid:false, linecolor:'#263238', tickcolor:GRAY,
    title:{text: vDef.xAxisLabel(), font:{color:vDef.xColor}},
    tickfont:{color:vDef.xColor}, overlaying:'y', side:'right',
    autorange: true,   // ë³€í™˜ëœ ë°ì´í„° ê¸°ì¤€ ìë™ ë²”ìœ„ ì‚°ì¶œ
    ...(!isInverted ? { tickprefix: vDef.xTickPrefix ?? '', ticksuffix: vDef.xTickSuffix ?? '' } : {}),
    ...y2Extra,
  };
  const layout = {
    ...baseLayout,
    height: 360,
    margin:{l:70,r:80,t:14,b:38},
    yaxis:{...baseLayout.yaxis, title:{text:yLabel,font:{color:yColor}},
      tickformat: vDef.yTickFmt ?? ',.0f', tickfont:{color:yColor}},
    yaxis2: y2,
    xaxis:{
      ...baseLayout.xaxis,
      range:[rangeFrom||RAW.dates[0], rangeTo||RAW.dates[RAW.dates.length-1]],
      rangeslider:{visible:true, bgcolor:'#1e2933', bordercolor:'#21262d', thickness:0.06},
      rangeselector:{
        bgcolor:SURFACE, bordercolor:'#21262d', borderwidth:1, font:{color:GRAY},
        buttons:[
          {count:3,step:'month',stepmode:'backward',label:'3M'},
          {count:6,step:'month',stepmode:'backward',label:'6M'},
          {count:1,step:'year', stepmode:'backward',label:'1Y'},
          {count:2,step:'year', stepmode:'backward',label:'2Y'},
          {step:'all',label: t('rangeAll')},
        ],
      },
    },
  };
  Plotly.react('chart-main', traces, layout, cfg);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì°¨íŠ¸ 2 â€” ë¡¤ë§ ìƒê´€ê³„ìˆ˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawCorr(slice) {
  const colors = slice.rolling_corr.map(v => v==null ? GRAY : v>=0 ? GREEN : RED);
  const traces = [
    {
      x:slice.dates, y:slice.rolling_corr,
      name: t('rollingR'), type:'bar',
      marker:{color:colors, opacity:0.75},
      hovertemplate:`<b>${t('rollingR')}</b>: %{y:.3f}<extra></extra>`,
    },
    {
      x:[slice.dates[0], slice.dates[slice.dates.length-1]],
      y:[RAW.corr, RAW.corr],
      name:`${t('overallR')} = ${RAW.corr}`,
      type:'scatter', mode:'lines',
      line:{color:BLUE,width:1.5,dash:'dash'}, hoverinfo:'skip',
    },
  ];
  const layout = {
    ...baseLayout, height:220, bargap:0.08,
    yaxis:{...baseLayout.yaxis, range:[-1.05,1.05], tickformat:'.2f',
      title:{text:'Pearson r',font:{color:GRAY}}},
    xaxis:{...baseLayout.xaxis,
      range:[rangeFrom||RAW.dates[0], rangeTo||RAW.dates[RAW.dates.length-1]]},
  };
  Plotly.react('chart-corr', traces, layout, cfg);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì°¨íŠ¸ 3 â€” ì‚°ì ë„
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function drawScatter(slice) {
  const vDef  = VIEWS[currentView];
  const years = [...new Set(slice.dates.map(d=>d.substring(0,4)))].sort();
  const pal   = ['#FF6B6B','#FFD93D','#6BCB77','#4D96FF','#845EC2','#FF9671','#00C9A7','#F9C74F'];
  const yc    = {}; years.forEach((y,i)=>yc[y]=pal[i%pal.length]);

  const byYear = {};
  slice.dates.forEach((d,i)=>{
    const y=d.substring(0,4);
    if(!byYear[y]) byYear[y]={x:[],y:[]};
    if(slice.x[i]!=null && slice.y[i]!=null){byYear[y].x.push(slice.x[i]);byYear[y].y.push(slice.y[i]);}
  });

  const allX=[], allY=[];
  Object.values(byYear).forEach(g=>{allX.push(...g.x);allY.push(...g.y);});
  const r = pearsonR(allX, allY);
  document.getElementById('stat-range-corr').textContent = isNaN(r)?'â€”':r.toFixed(3);

  // ì¶”ì„¸ì„ 
  const n=allX.length; let sumX=0,sumY=0,sumXY=0,sumX2=0;
  for(let i=0;i<n;i++){sumX+=allX[i];sumY+=allY[i];sumXY+=allX[i]*allY[i];sumX2+=allX[i]*allX[i];}
  const slope=(n*sumXY-sumX*sumY)/(n*sumX2-sumX*sumX);
  const intercept=(sumY-slope*sumX)/n;
  const xMin=Math.min(...allX), xMax=Math.max(...allX);
  const trendX=[xMin,xMax], trendY=trendX.map(x=>slope*x+intercept);

  const traces = Object.entries(byYear).map(([y,g])=>({
    x:g.x, y:g.y, name:y, type:'scatter', mode:'markers',
    marker:{color:yc[y],size:5,opacity:0.65},
    hovertemplate:`<b>${y}</b><br>${vDef.xAxisLabel()}: %{x:.4g}<br>${vDef.yLabel?vDef.yLabel():t('sp500Label')}: %{y:,.4g}<extra></extra>`,
  }));
  traces.push({
    x:trendX, y:trendY,
    name:`${t('trendline')} r=${isNaN(r)?'â€”':r.toFixed(3)}`,
    type:'scatter', mode:'lines',
    line:{color:BLUE,width:2,dash:'dash'}, hoverinfo:'skip',
  });

  const layout = {
    ...baseLayout, height:300,
    xaxis:{...baseLayout.xaxis, rangeslider:{visible:false},
      title:{text:vDef.xAxisLabel(),font:{color:GRAY}},
      tickprefix:vDef.xTickPrefix, ticksuffix:vDef.xTickSuffix, tickformat:vDef.xTickFormat},
    yaxis:{...baseLayout.yaxis, title:{text:vDef.yLabel?vDef.yLabel():t('sp500Label'),font:{color:GRAY}}, tickformat: vDef.yTickFmt ?? ',.0f'},
    legend:{...baseLayout.legend, orientation:'h', y:-0.18, x:0},
  };
  Plotly.react('chart-scatter', traces, layout, cfg);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// í†µê³„ ì¹´ë“œ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateStats() {
  const vDef = VIEWS[currentView];
  const last = RAW.dates.length-1;
  const xLast = RAW[vDef.xKey][last];
  const yKey  = vDef.yKey ?? 'sp500';
  const yLast = RAW[yKey]?.[last];
  document.getElementById('stat-x').textContent      = vDef.statVal(xLast);
  document.getElementById('stat-x-label').textContent= vDef.statLabel();
  document.getElementById('stat-x-sub').textContent  = vDef.statSub();
  // Y ì¶• stat ì¹´ë“œ: yKeyê°€ ìˆìœ¼ë©´ ì»¤ìŠ¤í…€ í‘œì‹œ, ì—†ìœ¼ë©´ S&P 500
  document.getElementById('stat-y-label').textContent= vDef.yLabel ? vDef.yLabel() : t('sp500Label');
  document.getElementById('stat-y-sub').textContent  = vDef.yStatSub ? vDef.yStatSub() : t('statSp500Sub');
  document.getElementById('stat-y').textContent      = vDef.yStatVal
    ? vDef.yStatVal(yLast)
    : (yLast?.toLocaleString('ko-KR',{maximumFractionDigits:0}) ?? 'â€”');
  document.getElementById('stat-corr').textContent   = RAW.corr;
  document.getElementById('stat-pval').textContent   = `p ${RAW.pval<0.001?'< 0.001':'= '+RAW.pval}`;
  document.getElementById('stat-updated').textContent= RAW.updated;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// í—¤ë” & ì°¨íŠ¸ íƒ€ì´í‹€ ê°±ì‹ 
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function viewCamelKey(prefix) {
  // snake_case â†’ CamelCase: 'unrate_fed' â†’ 'viewTitleUnrateFed'
  const cc = currentView.replace(/_([a-zA-Z0-9])/g, (_, c) => c.toUpperCase());
  return prefix + cc.charAt(0).toUpperCase() + cc.slice(1);
}
function updateViewText() {
  const vDef = VIEWS[currentView];
  document.getElementById('view-title').textContent = t(viewCamelKey('viewTitle'));
  document.getElementById('view-sub').textContent   = t(viewCamelKey('viewSub'));
  document.getElementById('title-main').textContent    = vDef.titleMain();
  document.getElementById('title-scatter').textContent = vDef.titleScatter();
  document.getElementById('title-corr').textContent    = t('chartCorr');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë™ê¸°í™” (range ë³€ê²½ ì‹œ corr + scatterë§Œ)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let _syncTimer = null;
let _isSyncing = false;

function syncSecondary() {
  if (!RAW) return;
  clearTimeout(_syncTimer);
  _syncTimer = setTimeout(() => {
    if (_isSyncing) return;
    _isSyncing = true;
    try {
      const slice = getSlice();
      drawCorr(slice);
      drawScatter(slice);
    } finally {
      _isSyncing = false;
    }
  }, 60);   // 60ms ë””ë°”ìš´ìŠ¤ â€” ì—°ì† relayout ì´ë²¤íŠ¸ í¡ìˆ˜
}

// plotly_relayout ë¦¬ìŠ¤ë„ˆë¥¼ ë”± í•œ ë²ˆë§Œ ë“±ë¡ (init()ì—ì„œ í˜¸ì¶œ)
function initChartListeners() {
  const el = document.getElementById('chart-main');
  el.on('plotly_relayout', (e) => {
    if (!RAW) return;
    const from = e['xaxis.range[0]'] ?? (e['xaxis.range']?.[0]);
    const to   = e['xaxis.range[1]'] ?? (e['xaxis.range']?.[1]);
    if (from && to) {
      rangeFrom = from.substring(0, 10);
      rangeTo   = to.substring(0, 10);
      document.getElementById('date-from').value = rangeFrom;
      document.getElementById('date-to').value   = rangeTo;
      syncSecondary();
    }
    if (e['xaxis.autorange'] === true) {
      rangeFrom = RAW.dates[0];
      rangeTo   = RAW.dates[RAW.dates.length - 1];
      document.getElementById('date-from').value = rangeFrom;
      document.getElementById('date-to').value   = rangeTo;
      syncSecondary();
    }
  });
}

function renderAll() {
  const slice = getSlice();
  updateStats();
  updateViewText();
  drawMain(slice);
  drawCorr(slice);
  drawScatter(slice);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë·° ì „í™˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const chartSections = ['range-bar', 'stats-row', 'charts-wrap'];

function showChartUI(visible) {
  document.querySelector('.range-bar').style.display  = visible ? '' : 'none';
  document.querySelector('.stats-row').style.display  = visible ? '' : 'none';
  document.querySelector('.charts').style.display     = visible ? '' : 'none';
  document.getElementById('quiz-view').style.display  = visible ? 'none' : 'flex';
}

async function switchView(viewId) {
  if (viewId === currentView && (RAW || viewId === 'quiz')) return;
  currentView = viewId;

  document.querySelectorAll('.nav-item').forEach(b => {
    b.classList.toggle('active', b.dataset.view === viewId);
  });

  // â”€â”€ í€´ì¦ˆ ë·° â”€â”€
  if (viewId === 'quiz') {
    showChartUI(false);
    document.getElementById('view-title').textContent = t('viewTitleQuiz');
    document.getElementById('view-sub').textContent   = t('viewSubQuiz');
    quizInit();
    return;
  }

  // â”€â”€ ì°¨íŠ¸ ë·°ë¡œ ë³µê·€ â”€â”€
  showChartUI(true);

  // ìºì‹œì— ìˆìœ¼ë©´ ë°”ë¡œ ë Œë”
  if (cache[viewId]) {
    RAW = cache[viewId];
    rangeFrom = RAW.dates[0];
    rangeTo   = RAW.dates[RAW.dates.length - 1];
    document.getElementById('date-from').value = rangeFrom;
    document.getElementById('date-to').value   = rangeTo;
    document.querySelectorAll('.rng-btn').forEach(b => b.classList.toggle('active', b.dataset.months === '0'));
    renderAll();
    return;
  }

  // ì°¨íŠ¸ ì˜ì—­ ì˜¤ë²„ë ˆì´ ìŠ¤í”¼ë„ˆ í‘œì‹œ (chart ë‚´ë¶€ innerHTMLì€ ê±´ë“œë¦¬ì§€ ì•ŠìŒ)
  const vLoader = document.getElementById('view-loader');
  const vText   = document.getElementById('view-loader-text');
  if (vText) vText.textContent = t('loadingText');
  vLoader.style.display = 'flex';

  // ê¸°ì¡´ Plotly ì°¨íŠ¸ ì •ë¦¬ (innerHTML ì´ˆê¸°í™” ì—†ì´)
  ['chart-main','chart-corr','chart-scatter'].forEach(id => {
    try { Plotly.purge(id); } catch(_) {}
  });

  try {
    const res = await fetch(VIEWS[viewId].file + '?_=' + Date.now());
    if (!res.ok) throw new Error(`${res.status} ${res.statusText} â€” ${VIEWS[viewId].file}`);
    RAW = await res.json();
    cache[viewId] = RAW;
    rangeFrom = RAW.dates[0];
    rangeTo   = RAW.dates[RAW.dates.length - 1];
    document.getElementById('date-from').value = rangeFrom;
    document.getElementById('date-to').value   = rangeTo;
    document.querySelectorAll('.rng-btn').forEach(b => b.classList.toggle('active', b.dataset.months === '0'));
    renderAll();
  } catch(err) {
    // ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ chart-mainì— í‘œì‹œ (Plotly ì—†ì´)
    ['chart-corr','chart-scatter'].forEach(id => {
      try { Plotly.purge(id); } catch(_) {}
      document.getElementById(id).innerHTML = '';
    });
    document.getElementById('chart-main').innerHTML =
      `<div style="padding:2rem;color:var(--red);font-size:0.9rem">
        âš ï¸ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ${err.message}<br>
        <span style="color:var(--muted);font-size:0.8rem">docs/ í´ë”ì— JSON íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</span>
      </div>`;
  } finally {
    vLoader.style.display = 'none';   // ì„±ê³µÂ·ì‹¤íŒ¨ ëª¨ë‘ ì˜¤ë²„ë ˆì´ í•´ì œ
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë²”ìœ„ ë²„íŠ¼
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function applyMonths(months) {
  const last = new Date(RAW.dates[RAW.dates.length-1]);
  if (months===0) {
    rangeFrom=RAW.dates[0]; rangeTo=RAW.dates[RAW.dates.length-1];
  } else {
    const from=new Date(last); from.setMonth(from.getMonth()-months);
    rangeFrom=from.toISOString().substring(0,10); rangeTo=RAW.dates[RAW.dates.length-1];
  }
  document.getElementById('date-from').value=rangeFrom;
  document.getElementById('date-to').value=rangeTo;
  Plotly.relayout('chart-main',{'xaxis.range':[rangeFrom,rangeTo]});
  syncSecondary();
}

document.getElementById('range-btns').addEventListener('click', e=>{
  const btn=e.target.closest('.rng-btn'); if(!btn) return;
  document.querySelectorAll('.rng-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  applyMonths(Number(btn.dataset.months));
});

document.getElementById('apply-range').addEventListener('click', ()=>{
  rangeFrom=document.getElementById('date-from').value;
  rangeTo=document.getElementById('date-to').value;
  if(!rangeFrom||!rangeTo) return;
  document.querySelectorAll('.rng-btn').forEach(b=>b.classList.remove('active'));
  Plotly.relayout('chart-main',{'xaxis.range':[rangeFrom,rangeTo]});
  syncSecondary();
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì‚¬ì´ë“œë°” í† ê¸€
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const sidebar  = document.getElementById('sidebar');
const mainEl   = document.getElementById('main');
const overlay  = document.getElementById('overlay');
let sidebarOpen = true;

function toggleSidebar() {
  const isMobile = window.innerWidth <= 768;
  if (isMobile) {
    sidebar.classList.toggle('open');
    overlay.classList.toggle('show', sidebar.classList.contains('open'));
  } else {
    sidebarOpen = !sidebarOpen;
    sidebar.classList.toggle('collapsed', !sidebarOpen);
    mainEl.classList.toggle('full', !sidebarOpen);
    mainEl.style.marginLeft = sidebarOpen
      ? 'var(--sidebar-w)'
      : '0';
    // resize charts after transition
    setTimeout(()=>{ Plotly.Plots.resize('chart-main'); Plotly.Plots.resize('chart-corr'); Plotly.Plots.resize('chart-scatter'); }, 280);
  }
}

document.getElementById('sidebar-toggle').addEventListener('click', toggleSidebar);
overlay.addEventListener('click', ()=>{ sidebar.classList.remove('open'); overlay.classList.remove('show'); });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ë„¤ë¹„ê²Œì´ì…˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.nav-item').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    switchView(btn.dataset.view);
    // mobile: close sidebar
    if(window.innerWidth<=768){ sidebar.classList.remove('open'); overlay.classList.remove('show'); }
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì–¸ì–´ ì „í™˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.lang-btn').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    LANG = btn.dataset.lang;
    document.documentElement.lang = LANG === 'zh' ? 'zh-CN' : LANG === 'ja' ? 'ja' : LANG;
    document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active', b===btn));
    applyTranslations();
    if (currentView === 'quiz') {
      document.getElementById('view-title').textContent = t('viewTitleQuiz');
      document.getElementById('view-sub').textContent   = t('viewSubQuiz');
    } else {
      updateViewText();
      if (RAW) renderAll();
    }
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ì´ˆê¸°í™”
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function init() {
  applyTranslations();
  try {
    await switchView('tga');
    initChartListeners();   // ë¦¬ìŠ¤ë„ˆ ë”± í•œ ë²ˆë§Œ ë“±ë¡
  } finally {
    document.getElementById('loading').style.display = 'none';  // ì„±ê³µ/ì‹¤íŒ¨ ëª¨ë‘ ìˆ¨ê¹€
  }
}

init().catch(err => {
  document.getElementById('loading').innerHTML =
    `<div style="text-align:center;color:var(--red)">âš ï¸ ì´ˆê¸°í™” ì‹¤íŒ¨<br><small style="color:var(--muted)">${err.message}</small></div>`;
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ê²½ì œ í€´ì¦ˆ (ë‚´ì¥ ë°ì´í„° â€” ë°±ì—”ë“œ ë¶ˆí•„ìš”)
// economy_quiz í”„ë¡œì íŠ¸ì˜ add_sample_data.py ê¸°ë°˜
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const QUIZ_DATA = [
  { id:1,  question:"ì¸í”Œë ˆì´ì…˜ì´ë€ ë¬¼ê°€ê°€ ì§€ì†ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” í˜„ìƒì„ ì˜ë¯¸í•œë‹¤.", answer:true,  category:"ê¸°ë³¸ê²½ì œê°œë…", difficulty:"easy",   explanation:"ì¸í”Œë ˆì´ì…˜ì€ ì¼ë°˜ì ìœ¼ë¡œ ë¬¼ê°€ìˆ˜ì¤€ì´ ì§€ì†ì ìœ¼ë¡œ ìƒìŠ¹í•˜ëŠ” í˜„ìƒì„ ë§í•©ë‹ˆë‹¤. ì´ëŠ” í†µí™”ëŸ‰ ì¦ê°€, ìˆ˜ìš” ì¦ê°€, ê³µê¸‰ ê°ì†Œ ë“±ì˜ ìš”ì¸ìœ¼ë¡œ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  { id:2,  question:"GDPëŠ” êµ­ë‚´ì´ìƒì‚°ì„ ì˜ë¯¸í•˜ë©°, í•œ ë‚˜ë¼ì˜ ê²½ì œ ê·œëª¨ë¥¼ ì¸¡ì •í•˜ëŠ” ì§€í‘œì´ë‹¤.", answer:true,  category:"ê¸°ë³¸ê²½ì œê°œë…", difficulty:"easy",   explanation:"GDP(Gross Domestic Product)ëŠ” êµ­ë‚´ì´ìƒì‚°ìœ¼ë¡œ, íŠ¹ì • ê¸°ê°„ ë™ì•ˆ í•œ ë‚˜ë¼ ë‚´ì—ì„œ ìƒì‚°ëœ ëª¨ë“  ìµœì¢…ì¬í™”ì™€ ì„œë¹„ìŠ¤ì˜ ì‹œì¥ê°€ì¹˜ë¥¼ í•©í•œ ê²ƒì…ë‹ˆë‹¤." },
  { id:3,  question:"ì¤‘ì•™ì€í–‰ì˜ ì£¼ìš” ì—­í• ì€ í†µí™”ì •ì±…ì„ í†µí•´ ê²½ì œë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ë‹¤.", answer:true,  category:"ê¸ˆìœµì •ì±…",   difficulty:"medium", explanation:"ì¤‘ì•™ì€í–‰ì€ í†µí™”ì •ì±…ì„ í†µí•´ ë¬¼ê°€ì•ˆì •ê³¼ ê²½ì œì„±ì¥ì„ ë„ëª¨í•˜ê³ , ê¸ˆìœµì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ ìœ ì§€í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤." },
  { id:4,  question:"ì£¼ì‹ì‹œì¥ì—ì„œ ì£¼ê°€ê°€ ìƒìŠ¹í•˜ë©´ ë°˜ë“œì‹œ ê²½ì œê°€ ì¢‹ì•„ì§„ë‹¤ëŠ” ëœ»ì´ë‹¤.", answer:false, category:"ì£¼ì‹ì‹œì¥",   difficulty:"medium", explanation:"ì£¼ê°€ ìƒìŠ¹ì´ ë°˜ë“œì‹œ ê²½ì œ ìƒí™©ì´ ì¢‹ì•„ì§„ë‹¤ëŠ” ì˜ë¯¸ëŠ” ì•„ë‹™ë‹ˆë‹¤. ì£¼ê°€ëŠ” ë‹¤ì–‘í•œ ìš”ì¸(ì‹¬ë¦¬, ìœ ë™ì„±, ê¸°ëŒ€ ë“±)ì— ì˜í•´ ë³€ë™í•˜ë©°, ì‹¤ë¬¼ê²½ì œì™€ ì™„ì „íˆ ì¼ì¹˜í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  { id:5,  question:"ë³µë¦¬ë€ ì›ê¸ˆì— ì´ìë¥¼ ë”í•œ ê¸ˆì•¡ì— ëŒ€í•´ ë‹¤ì‹œ ì´ìê°€ ë¶™ëŠ” ê²ƒì„ ë§í•œë‹¤.", answer:true,  category:"ê¸ˆìœµìƒì‹",   difficulty:"easy",   explanation:"ë³µë¦¬ëŠ” ì›ê¸ˆê³¼ ì´ìë¥¼ í•©í•œ ê¸ˆì•¡ì— ëŒ€í•´ ë‹¤ì‹œ ì´ìê°€ ë¶™ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ íš¨ê³¼ê°€ ì»¤ì§€ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤." },
  { id:6,  question:"ê²½ê¸°ì¹¨ì²´ëŠ” GDPê°€ ì—°ì† 2ë¶„ê¸° ë™ì•ˆ ê°ì†Œí•˜ëŠ” í˜„ìƒì´ë‹¤.", answer:true,  category:"ê²½ê¸°ë¶„ì„",   difficulty:"medium", explanation:"ì¼ë°˜ì ìœ¼ë¡œ ê²½ê¸°ì¹¨ì²´ëŠ” GDPê°€ ì—°ì† 2ë¶„ê¸°(6ê°œì›”) ë™ì•ˆ ê°ì†Œí•˜ëŠ” í˜„ìƒìœ¼ë¡œ ì •ì˜ë©ë‹ˆë‹¤. ì´ëŠ” ê²½ì œ í™œë™ì´ ì „ë°˜ì ìœ¼ë¡œ ìœ„ì¶•ëœ ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤." },
  { id:7,  question:"í™˜ìœ¨ì´ ìƒìŠ¹í•˜ë©´ ìˆ˜ì¶œì´ ì¦ê°€í•˜ê³  ìˆ˜ì…ì´ ê°ì†Œí•œë‹¤.", answer:true,  category:"êµ­ì œê²½ì œ",   difficulty:"medium", explanation:"í™˜ìœ¨ ìƒìŠ¹(ì›í™” ì•½ì„¸)ì€ ìˆ˜ì¶œ ìƒí’ˆì˜ ê°€ê²© ê²½ìŸë ¥ì„ ë†’ì—¬ ìˆ˜ì¶œì„ ì¦ê°€ì‹œí‚¤ê³ , ìˆ˜ì… ìƒí’ˆì˜ ê°€ê²©ì„ ìƒëŒ€ì ìœ¼ë¡œ ë†’ì—¬ ìˆ˜ì…ì„ ê°ì†Œì‹œí‚µë‹ˆë‹¤." },
  { id:8,  question:"ì¸í”Œë ˆì´ì…˜ì€ í•­ìƒ ê²½ì œì— ë‚˜ìœ ì˜í–¥ì„ ë¯¸ì¹œë‹¤.", answer:false, category:"ê¸°ë³¸ê²½ì œê°œë…", difficulty:"hard",   explanation:"ì¸í”Œë ˆì´ì…˜ì€ ì ì • ìˆ˜ì¤€(ë³´í†µ 2-3%)ì—ì„œëŠ” ê²½ì œ ì„±ì¥ì— ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ê³¼ë„í•œ ì¸í”Œë ˆì´ì…˜ì€ ê²½ì œì— ì•…ì˜í–¥ì„ ë¯¸ì¹©ë‹ˆë‹¤." },
  { id:9,  question:"ì¤‘ì•™ì€í–‰ì´ ê¸°ì¤€ê¸ˆë¦¬ë¥¼ ì¸ìƒí•˜ë©´ í†µí™”ëŸ‰ì´ ê°ì†Œí•œë‹¤.", answer:true,  category:"ê¸ˆìœµì •ì±…",   difficulty:"hard",   explanation:"ê¸°ì¤€ê¸ˆë¦¬ ì¸ìƒì€ ì‹œì¤‘ ê¸ˆë¦¬ë¥¼ ìƒìŠ¹ì‹œì¼œ ëŒ€ì¶œì„ ì¤„ì´ê³  ì €ì¶•ì„ ëŠ˜ë ¤ í†µí™”ëŸ‰ì„ ê°ì†Œì‹œí‚¤ëŠ” íš¨ê³¼ê°€ ìˆìŠµë‹ˆë‹¤." },
  { id:10, question:"ì£¼ì‹ì€ ì±„ê¶Œë³´ë‹¤ ìœ„í—˜í•˜ì§€ë§Œ ìˆ˜ìµë¥ ì´ ë†’ì„ ê°€ëŠ¥ì„±ì´ í¬ë‹¤.", answer:true,  category:"íˆ¬ììƒì‹",   difficulty:"easy",   explanation:"ì£¼ì‹ì€ ì±„ê¶Œë³´ë‹¤ ë³€ë™ì„±ì´ í¬ê³  ìœ„í—˜ì´ ë†’ì§€ë§Œ, ì¥ê¸°ì ìœ¼ë¡œëŠ” ë” ë†’ì€ ìˆ˜ìµë¥ ì„ ì œê³µí•  ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤." },
  { id:11, question:"ì–‘ì ì™„í™”(QE)ëŠ” ì¤‘ì•™ì€í–‰ì´ ì‹œì¥ì—ì„œ ì±„ê¶Œì„ ë§¤ì…í•´ ìœ ë™ì„±ì„ ê³µê¸‰í•˜ëŠ” ì •ì±…ì´ë‹¤.", answer:true,  category:"ê¸ˆìœµì •ì±…",   difficulty:"hard",   explanation:"ì–‘ì ì™„í™”ëŠ” ì¤‘ì•™ì€í–‰ì´ êµ­ì±„ë‚˜ ëª¨ê¸°ì§€ì±„ê¶Œ ë“±ì„ ì§ì ‘ ë§¤ì…í•´ ì‹œì¤‘ì— ìœ ë™ì„±ì„ ê³µê¸‰í•˜ëŠ” ë¹„ì „í†µì  í†µí™”ì •ì±…ì…ë‹ˆë‹¤. 2008ë…„ ê¸ˆìœµìœ„ê¸° ì´í›„ ë¯¸êµ­ ì—°ì¤€ì´ ëŒ€ê·œëª¨ë¡œ ì‹œí–‰í–ˆìŠµë‹ˆë‹¤." },
  { id:12, question:"ë””í”Œë ˆì´ì…˜ì€ ë¬¼ê°€ê°€ ì§€ì†ì ìœ¼ë¡œ í•˜ë½í•˜ëŠ” í˜„ìƒìœ¼ë¡œ, ê²½ì œì— í•­ìƒ ìœ ë¦¬í•˜ë‹¤.", answer:false, category:"ê¸°ë³¸ê²½ì œê°œë…", difficulty:"hard",   explanation:"ë””í”Œë ˆì´ì…˜ì€ ë¬¼ê°€ê°€ ì§€ì†ì ìœ¼ë¡œ í•˜ë½í•˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤. ë‹¨ê¸°ì ìœ¼ë¡œ êµ¬ë§¤ë ¥ì´ ë†’ì•„ì§€ì§€ë§Œ, ì†Œë¹„ ì§€ì—°, ê¸°ì—… ì´ìµ ê°ì†Œ, ì‹¤ì—… ì¦ê°€ ë“±ìœ¼ë¡œ ê²½ì œì— ì‹¬ê°í•œ ì•…ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
  { id:13, question:"ê²½ìƒìˆ˜ì§€ í‘ìëŠ” í•´ì™¸ë¡œë¶€í„°ì˜ ìˆœìˆ˜ì…ì´ ìˆœì§€ì¶œë³´ë‹¤ ë§ë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.", answer:true,  category:"êµ­ì œê²½ì œ",   difficulty:"hard",   explanation:"ê²½ìƒìˆ˜ì§€ í‘ìëŠ” ìƒí’ˆÂ·ì„œë¹„ìŠ¤ ìˆ˜ì¶œ, ë³¸ì›ì†Œë“, ì´ì „ì†Œë“ ë“±ì„ í•©ì‚°í•œ ê²°ê³¼ë¡œ ì™¸êµ­ì—ì„œ ë°›ì€ ëˆì´ ì§€ê¸‰í•œ ëˆë³´ë‹¤ ë§ìŒì„ ì˜ë¯¸í•©ë‹ˆë‹¤." },
  { id:14, question:"PER(ì£¼ê°€ìˆ˜ìµë¹„ìœ¨)ì´ ë‚®ì„ìˆ˜ë¡ ì£¼ì‹ì´ ê³ í‰ê°€ë˜ì–´ ìˆë‹¤ëŠ” ì‹ í˜¸ë‹¤.", answer:false, category:"ì£¼ì‹ì‹œì¥",   difficulty:"medium", explanation:"PER(Price-Earnings Ratio)ì´ ë‚®ì„ìˆ˜ë¡ ì£¼ê°€ ëŒ€ë¹„ ì´ìµì´ ë§ë‹¤ëŠ” ëœ»ìœ¼ë¡œ, ì¼ë°˜ì ìœ¼ë¡œ ì €í‰ê°€ë˜ì–´ ìˆì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ë‹¨, ì—…ì¢…ê³¼ ì„±ì¥ì„±ì„ í•¨ê»˜ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤." },
  { id:15, question:"ë¶„ì‚°íˆ¬ìëŠ” íˆ¬ì ìœ„í—˜ì„ ì¤„ì´ëŠ” íš¨ê³¼ê°€ ìˆë‹¤.", answer:true,  category:"íˆ¬ììƒì‹",   difficulty:"easy",   explanation:"ë¶„ì‚°íˆ¬ìëŠ” ì—¬ëŸ¬ ìì‚°ì— ë‚˜ëˆ  íˆ¬ìí•¨ìœ¼ë¡œì¨ íŠ¹ì • ìì‚°ì˜ ì†ì‹¤ì´ ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì„ ì¤„ì´ëŠ” ì „ëµì…ë‹ˆë‹¤. 'ê³„ë€ì„ í•œ ë°”êµ¬ë‹ˆì— ë‹´ì§€ ë§ë¼'ëŠ” ì›ì¹™ì…ë‹ˆë‹¤." },
];

let quizStats    = { correct: 0, incorrect: 0 };
let currentQuiz  = null;
let filteredQuiz = [...QUIZ_DATA];
let quizInitialized = false;

function quizInit() {
  if (!quizInitialized) {
    quizLoadStats();
    quizBuildCategoryFilter();
    quizInitialized = true;
  }
  quizLoadRandom();
}

function quizBuildCategoryFilter() {
  const sel = document.getElementById('quizCategoryFilter');
  const cats = [...new Set(QUIZ_DATA.map(q => q.category))].sort();
  cats.forEach(cat => {
    const opt = document.createElement('option');
    opt.value = cat;
    opt.textContent = cat;
    sel.appendChild(opt);
  });
}

function quizApplyFilter() {
  const cat  = document.getElementById('quizCategoryFilter').value;
  const diff = document.getElementById('quizDifficultyFilter').value;
  filteredQuiz = QUIZ_DATA.filter(q =>
    (!cat  || q.category   === cat) &&
    (!diff || q.difficulty === diff)
  );
  if (filteredQuiz.length === 0) filteredQuiz = [...QUIZ_DATA];
  quizLoadRandom();
}

function quizLoadRandom() {
  const pool = currentQuiz
    ? filteredQuiz.filter(q => q.id !== currentQuiz.id)
    : filteredQuiz;
  const src  = pool.length > 0 ? pool : filteredQuiz;
  currentQuiz = src[Math.floor(Math.random() * src.length)];
  quizDisplay();
}

function quizDisplay() {
  if (!currentQuiz) return;

  document.getElementById('quizQuestion').textContent = currentQuiz.question;

  const catEl  = document.getElementById('quizCategory');
  const diffEl = document.getElementById('quizDifficulty');
  catEl.textContent  = currentQuiz.category  ?? '';
  diffEl.textContent = { easy: t('quizEasy'), medium: t('quizMedium'), hard: t('quizHard') }[currentQuiz.difficulty] ?? currentQuiz.difficulty;
  diffEl.className   = `quiz-difficulty-badge ${currentQuiz.difficulty}`;

  document.getElementById('quizResult').style.display   = 'none';
  document.getElementById('quizTrueBtn').disabled        = false;
  document.getElementById('quizFalseBtn').disabled       = false;
  document.getElementById('quizTrueBtn').style.opacity   = '1';
  document.getElementById('quizFalseBtn').style.opacity  = '1';
  document.getElementById('quizTrueBtn').style.transform = 'scale(1)';
  document.getElementById('quizFalseBtn').style.transform= 'scale(1)';
}

function quizSelectAnswer(userAnswer) {
  if (!currentQuiz) return;

  const trueBtn = document.getElementById('quizTrueBtn');
  const falseBtn= document.getElementById('quizFalseBtn');
  trueBtn.disabled  = true;
  falseBtn.disabled = true;

  const isCorrect = userAnswer === currentQuiz.answer;
  if (isCorrect) quizStats.correct++; else quizStats.incorrect++;
  quizSaveStats();
  quizUpdateStatsUI();

  const resultEl = document.getElementById('quizResult');
  const msgEl    = document.getElementById('quizResultMsg');
  const expEl    = document.getElementById('quizExplanation');

  resultEl.style.display = 'block';
  msgEl.textContent  = isCorrect ? t('quizResultCorrect') : t('quizResultIncorrect');
  msgEl.className    = `quiz-result-msg ${isCorrect ? 'correct' : 'incorrect'}`;
  expEl.textContent  = currentQuiz.explanation
    ? t('quizExplanationPrefix') + currentQuiz.explanation
    : t('quizNoExplanation');

  const correctBtn  = currentQuiz.answer ? trueBtn : falseBtn;
  const incorrectBtn= currentQuiz.answer ? falseBtn : trueBtn;
  correctBtn.style.opacity   = '1';
  correctBtn.style.transform = 'scale(1.05)';
  incorrectBtn.style.opacity = '0.4';
}

function quizLoadNext() { quizLoadRandom(); }

function quizUpdateStatsUI() {
  document.getElementById('quizCorrectCount').textContent  = quizStats.correct;
  document.getElementById('quizIncorrectCount').textContent= quizStats.incorrect;
  const total = quizStats.correct + quizStats.incorrect;
  document.getElementById('quizAccuracy').textContent =
    total > 0 ? Math.round((quizStats.correct / total) * 100) + '%' : '0%';
}

function quizSaveStats() {
  localStorage.setItem('macroQuizStats', JSON.stringify(quizStats));
}

function quizLoadStats() {
  const saved = localStorage.getItem('macroQuizStats');
  if (saved) quizStats = JSON.parse(saved);
  quizUpdateStatsUI();
}

function quizResetStats() {
  quizStats = { correct: 0, incorrect: 0 };
  quizSaveStats();
  quizUpdateStatsUI();
}
</script>
</body>
</html>
